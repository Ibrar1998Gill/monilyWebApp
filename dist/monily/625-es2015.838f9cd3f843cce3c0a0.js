(self.webpackChunkmonily=self.webpackChunkmonily||[]).push([[625],{20625:function(e,a,t){"use strict";t.r(a),t.d(a,{dashboardModule:function(){return f}});var o=t(61116),i=t(31041),r=t(90702),s=t(96087),n=t(47323),l=t(92099),u=t(46982),c=t(52080),p=t(64762),d=t(53739),y=t(90894),v={Header:{Time:"2022-10-30T03:48:17-07:00",ReportName:"ProfitAndLoss",DateMacro:"this calendar year-to-date",ReportBasis:"Accrual",StartPeriod:"2022-01-01",EndPeriod:"2022-10-30",SummarizeColumnsBy:"Total",Currency:"USD",Option:[{Name:"AccountingStandard",Value:"GAAP"},{Name:"NoReportData",Value:"false"}]},Columns:{Column:[{ColTitle:"",ColType:"Account",MetaData:[{Name:"ColKey",Value:"account"}]},{ColTitle:"Total",ColType:"Money",MetaData:[{Name:"ColKey",Value:"total"}]}]},Rows:{Row:[{Header:{ColData:[{value:"Income"},{value:""}]},Rows:{Row:[{ColData:[{value:"Sales",id:"6"},{value:"674842.00"}],type:"Data"}]},Summary:{ColData:[{value:"Total Income"},{value:"674842.00"}]},type:"Section",group:"Income"},{Summary:{ColData:[{value:"Gross Profit"},{value:"674842.00"}]},type:"Section",group:"GrossProfit"},{Header:{ColData:[{value:"Expenses"},{value:""}]},Rows:{Row:[{ColData:[{value:"Advertising & Marketing",id:"8"},{value:"97826.67"}],type:"Data"},{ColData:[{value:"Ask My Accountant",id:"25"},{value:"9057.40"}],type:"Data"},{ColData:[{value:"Car & Truck",id:"9"},{value:"1698.38"}],type:"Data"},{ColData:[{value:"Contractors",id:"11"},{value:"42299.83"}],type:"Data"},{ColData:[{value:"Dues and Subscription",id:"40"},{value:"459.86"}],type:"Data"},{ColData:[{value:"Insurance",id:"12"},{value:"185558.51"}],type:"Data"},{ColData:[{value:"Job Boards",id:"39"},{value:"858.05"}],type:"Data"},{ColData:[{value:"Job Supplies",id:"21"},{value:"1798.84"}],type:"Data"},{ColData:[{value:"Legal & Professional Services",id:"14"},{value:"66524.22"}],type:"Data"},{ColData:[{value:"Meals & Entertainment",id:"15"},{value:"8611.41"}],type:"Data"},{ColData:[{value:"Office Supplies & Software",id:"17"},{value:"61021.57"}],type:"Data"},{ColData:[{value:"Other Business Expenses",id:"16"},{value:"150.00"}],type:"Data"},{ColData:[{value:"Payroll Expenses",id:"31"},{value:"504831.10"}],type:"Data"},{ColData:[{value:"postage",id:"33"},{value:"565.50"}],type:"Data"},{ColData:[{value:"Rent & Lease",id:"19"},{value:"37233.15"}],type:"Data"},{ColData:[{value:"Repairs & Maintenance",id:"20"},{value:"1314.54"}],type:"Data"},{ColData:[{value:"Travel",id:"23"},{value:"11934.57"}],type:"Data"},{ColData:[{value:"Uncategorized Expense",id:"3"},{value:"201.92"}],type:"Data"},{ColData:[{value:"Utilities",id:"24"},{value:"7022.86"}],type:"Data"}]},Summary:{ColData:[{value:"Total Expenses"},{value:"1038968.38"}]},type:"Section",group:"Expenses"},{Summary:{ColData:[{value:"Net Operating Income"},{value:"-364126.38"}]},type:"Section",group:"NetOperatingIncome"},{Summary:{ColData:[{value:"Net Income"},{value:"-364126.38"}]},type:"Section",group:"NetIncome"}]}},h=t(40018),m=t(53375),Z=t(29609),g=t(35366),D=t(72003),A=t(24419),T=t(83646),q=t(43675),x=t(75800);function b(e,a){if(1&e&&(g.TgZ(0,"div",2),g.TgZ(1,"div",3),g.TgZ(2,"div",4),g.TgZ(3,"div",5),g.TgZ(4,"div",6),g.TgZ(5,"div",7),g.TgZ(6,"div",8),g.TgZ(7,"h3",9),g._uU(8,"Profit And Loss"),g.qZA(),g.TgZ(9,"span",10),g.TgZ(10,"span",11),g._uU(11),g.ALo(12,"currency"),g.qZA(),g.qZA(),g._UZ(13,"i",12),g.TgZ(14,"div",13),g._UZ(15,"apx-chart",14),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(16,"div",4),g.TgZ(17,"div",5),g.TgZ(18,"div",6),g.TgZ(19,"div",7),g.TgZ(20,"div",8),g.TgZ(21,"h3",9),g._uU(22,"Expenses"),g.qZA(),g.TgZ(23,"span",10),g.TgZ(24,"span",11),g._uU(25),g.ALo(26,"currency"),g.qZA(),g.qZA(),g._UZ(27,"i",12),g.TgZ(28,"div",15),g._UZ(29,"google-chart",16),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(30,"div",4),g.TgZ(31,"div",5),g.TgZ(32,"div",17),g.TgZ(33,"div",18),g.TgZ(34,"div",19),g.TgZ(35,"h3"),g._uU(36,"Revenue"),g.qZA(),g.qZA(),g.TgZ(37,"div",20),g.TgZ(38,"div",21),g.TgZ(39,"div",22),g.TgZ(40,"span",9),g._uU(41,"Yearly"),g.qZA(),g.qZA(),g.TgZ(42,"div",22),g.TgZ(43,"span",11),g._uU(44),g.ALo(45,"currency"),g.ALo(46,"currency"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(47,"div",21),g.TgZ(48,"div",22),g.TgZ(49,"span",9),g._uU(50,"Quaterly"),g.qZA(),g.qZA(),g.TgZ(51,"div",22),g.TgZ(52,"span",11),g._uU(53),g.ALo(54,"currency"),g.ALo(55,"currency"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(56,"div",21),g.TgZ(57,"div",22),g.TgZ(58,"span",9),g._uU(59,"Monthly"),g.qZA(),g.qZA(),g.TgZ(60,"div",22),g.TgZ(61,"span",11),g._uU(62),g.ALo(63,"currency"),g.ALo(64,"currency"),g.qZA(),g.qZA(),g.qZA(),g._UZ(65,"i",12),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(66,"div",4),g.TgZ(67,"div",5),g.TgZ(68,"div",17),g.TgZ(69,"div",18),g.TgZ(70,"div",19),g.TgZ(71,"h3"),g._uU(72,"Payments"),g.qZA(),g.qZA(),g.TgZ(73,"div",20),g.TgZ(74,"div",21),g.TgZ(75,"div",22),g.TgZ(76,"span",9),g._uU(77,"Yearly"),g.qZA(),g.qZA(),g.TgZ(78,"div",22),g.TgZ(79,"span",11),g._uU(80),g.ALo(81,"currency"),g.ALo(82,"currency"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(83,"div",21),g.TgZ(84,"div",22),g.TgZ(85,"span",9),g._uU(86,"Quaterly"),g.qZA(),g.qZA(),g.TgZ(87,"div",22),g.TgZ(88,"span",11),g._uU(89),g.ALo(90,"currency"),g.ALo(91,"currency"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(92,"div",21),g.TgZ(93,"div",22),g.TgZ(94,"span",9),g._uU(95,"Monthly"),g.qZA(),g.qZA(),g.TgZ(96,"div",22),g.TgZ(97,"span",11),g._uU(98),g.ALo(99,"currency"),g.ALo(100,"currency"),g.qZA(),g.qZA(),g.qZA(),g._UZ(101,"i",12),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&e){const e=g.oxw();g.xp6(11),g.Oqu(g.xi3(12,15,e.profitAndLoss+e.expensesBar,"USD")),g.xp6(4),g.Q6J("series",e.bar.series)("chart",e.bar.chart)("dataLabels",e.bar.dataLabels)("plotOptions",e.bar.plotOptions)("xaxis",e.bar.xaxis)("colors",e.bar.colors),g.xp6(10),g.Oqu(g.xi3(26,18,e.totalExpenses,"USD")),g.xp6(4),g.Q6J("data",e.pieChart3),g.xp6(15),g.Oqu(null==e.yearlyDataRevenue?g.xi3(45,21,0,"USD"):g.xi3(46,24,e.yearlyDataRevenue,"USD")),g.xp6(9),g.Oqu(null==e.quaterlyDataRevenue?g.xi3(54,27,0,"USD"):g.xi3(55,30,e.quaterlyDataRevenue,"USD")),g.xp6(9),g.Oqu(null==e.monthlyDataRevenue?g.xi3(63,33,0,"USD"):g.xi3(64,36,e.monthlyDataRevenue,"USD")),g.xp6(18),g.Oqu(null==e.yearlyDataPayments?g.xi3(81,39,0,"USD"):g.xi3(82,42,e.yearlyDataPayments,"USD")),g.xp6(9),g.Oqu(null==e.quaterlyDataPayments?g.xi3(90,45,0,"USD"):g.xi3(91,48,e.quaterlyDataPayments,"USD")),g.xp6(9),g.Oqu(null==e.monthlyDataPayments?g.xi3(99,51,0,"USD"):g.xi3(100,54,e.monthlyDataPayments,"USD"))}}const C=[{path:"",children:[{path:"",component:(()=>{class e{constructor(e,a,t,o){this.cd=e,this.http=a,this.localService=t,this.helperService=o,this.secondary_color=localStorage.getItem("secondary_color")||"#f73164",this.primary_color=localStorage.getItem("primary_color")||"#5330ab",this.mutablePieData={},this.profitAndLoss=0,this.expensesBar=0,this.pieArray=[["Task","expenses"]],this.pieChart3={chartType:"PieChart",dataTable:this.pieArray,options:{width:"100%",height:200,colors:["#f8d62b","#51bb25","#a927f9",this.secondary_color,this.primary_color],backgroundColor:"#FEF5ED"}},this.bar={series:[{name:"USD",data:[this.profitAndLoss,this.expensesBar]}],colors:[this.secondary_color],chart:{type:"bar",height:185},plotOptions:{bar:{horizontal:!0}},dataLabels:{enabled:!0},xaxis:{categories:["Income","Expenses"]}}}ngOnInit(){this.observe(),console.log(this.localService.getJsonValue("company")),null!=this.localService.getJsonValue("company")&&(this.companyid=this.localService.getJsonValue("company")),null!=this.companyid&&(this.getExpenses(),this.dashboardCharts(),this.revenueGenerate(),this.paymentGenerate(),console.log(this.profitAndLoss))}observe(){return(0,p.mG)(this,void 0,void 0,function*(){d.A.companySelected.subscribe(e=>{e&&(this.companyid=this.localService.getJsonValue("company"),this.getExpenses(),this.dashboardCharts(),this.revenueGenerate(),this.paymentGenerate())})})}getExpenses(){}revenueGenerate(){let e=[];h.Z.Invoice.map(a=>{let t=Z(a.TxnDate).format("MM/DD/YYYY"),o=this.helperService.calculateDays(a.DueDate);e.push({Date:t,num:a.DocNumber,Customer:a.CustomerRef.name,Amount:a.Balance,TotalAmt:a.TotalAmt,Status:o,id:a.Id})}),this.monthlyDataRevenue=this.helperService.getCurrentMonthExpenses(e),this.yearlyDataRevenue=this.helperService.getYearlyExpenses(e);const a=this.helperService.getQuarterlyExpenses(e);this.quaterlyDataRevenue=parseFloat(a[Object.keys(a).pop()]).toFixed(2)}paymentGenerate(){let e=[];m.Z.Bill.map(a=>{let t=new Date(a.TxnDate).toLocaleString();t=t.substring(0,t.indexOf(",")),t=this.helperService.formattedDate(a.TxnDate);const o=a.VendorRef.name,i=this.helperService.calculateDays(a.DueDate);e.push({Date:t,Customer:o,Status:this.helperService.calculateDays(a.DueDate),pastDue:i,Amount:a.Balance,TotalAmt:a.TotalAmt,id:a.Id})}),this.monthlyDataPayments=this.helperService.getCurrentMonthExpenses(e),this.yearlyDataPayments=this.helperService.getYearlyExpenses(e);const a=this.helperService.getQuarterlyExpenses(e);this.quaterlyDataPayments=parseFloat(a[Object.keys(a).pop()]).toFixed(2)}dashboardCharts(){let e=[];y.Z.QueryResponse.Purchase.map(e=>{let a=e.Line[0].AccountBasedExpenseLineDetail.AccountRef.name;this.mutablePieData[a]?this.mutablePieData[a]+=parseFloat(e.TotalAmt):this.mutablePieData[a]=parseFloat(e.TotalAmt)});for(const t in this.mutablePieData){let a=Math.round(this.mutablePieData[t]);this.pieArray.push([t,a]),e.push(a)}var a=e.reduce(function(e,a){return e+a},0);this.totalExpenses=a,v.Rows.Row.map(e=>{e.hasOwnProperty("group")&&"Income"==e.group&&(null==e?void 0:e.hasOwnProperty("Summary"))&&(this.profitAndLoss=Math.round(e.Summary.ColData[1].value)),e.hasOwnProperty("group")&&"Expenses"==e.group&&(null==e?void 0:e.hasOwnProperty("Summary"))&&(this.expensesBar=Math.round(e.Summary.ColData[1].value))}),this.bar.series[0].data[0]=this.profitAndLoss,this.bar.series[0].data[1]=this.expensesBar}}return e.\u0275fac=function(a){return new(a||e)(g.Y36(g.sBO),g.Y36(D.e),g.Y36(A.C),g.Y36(T.W))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-dashboard"]],decls:2,vars:3,consts:[[3,"title","active_item"],["class","container",4,"ngIf"],[1,"container"],[1,"row"],[1,"col-sm-6","col-xl-6","col-lg-6"],[1,"card","o-hidden","cstmCard"],[1,"bg-primary","b-r-4","card-body","minHeight"],[1,"media","static-top-widget"],[1,"media-body"],[1,"m-0"],[1,"d-flex","align-items-center"],[1,"mb-0","counter"],["data-feather","dollar-sign",1,"icon-bg"],["id","basic-bar",1,"mt-3"],[3,"series","chart","dataLabels","plotOptions","xaxis","colors"],[1,"mt-3"],[3,"data"],[1,"bg-primary","b-r-4","card-body"],[1,"media","static-top-widget","flex-column"],[1,"d-flex","w-100"],[1,"media-body","w-100"],[1,"row","mt-3","mb-3"],[1,"col-sm-6"]],template:function(e,a){1&e&&(g._UZ(0,"app-breadcrumb",0),g.YNc(1,b,102,57,"div",1)),2&e&&(g.Q6J("title","Dashboard")("active_item","Dashboard"),g.xp6(1),g.Q6J("ngIf",null!=a.companyid))},directives:[q.L,o.O5,u.x,x.P4],pipes:[o.H9],styles:[".margin1[_ngcontent-%COMP%]{margin-top:1px}#basic-bar[_ngcontent-%COMP%]{background-color:#fef5ed!important}.static-top-widget[_ngcontent-%COMP%]   .media-body[_ngcontent-%COMP%]{padding-left:0}.minHeight[_ngcontent-%COMP%]{min-height:400px}"]}),e})()}]}];let S=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[c.Bz.forChild(C)],c.Bz]}),e})(),f=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[x.Ye,o.ez,S,n.bB,r.d,s.A0,i.u5,i.UX,l.m,u.X]]}),e})()}}]);
!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(self.webpackChunkmonily=self.webpackChunkmonily||[]).push([[224],{62345:function(e,i,n){"use strict";n.r(i),n.d(i,{payableModule:function(){return P}});var r=n(61116),o=n(31041),s=n(90702),c=n(96087),u=n(47323),l=n(92099),g=n(46982),Z=n(52080),d=n(53375),p=n(35366),h=n(83646),A=n(24419),m=n(43675),v=n(39167),D=n(36280),T=["chart"],q=["Verticalchart"];function f(t,e){if(1&t&&(p.TgZ(0,"div",14),p.TgZ(1,"div",15),p.TgZ(2,"div",16),p.TgZ(3,"div",17),p.TgZ(4,"div",18),p.TgZ(5,"div",19),p.TgZ(6,"span",20),p._uU(7,"Yearly"),p.qZA(),p.qZA(),p.TgZ(8,"div",19),p.TgZ(9,"span",21),p._uU(10),p.ALo(11,"currency"),p.ALo(12,"currency"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(13,"div",18),p.TgZ(14,"div",19),p.TgZ(15,"span",20),p._uU(16,"Quaterly"),p.qZA(),p.qZA(),p.TgZ(17,"div",19),p.TgZ(18,"span",21),p._uU(19),p.ALo(20,"currency"),p.ALo(21,"currency"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(22,"div",18),p.TgZ(23,"div",19),p.TgZ(24,"span",20),p._uU(25,"Monthly"),p.qZA(),p.qZA(),p.TgZ(26,"div",19),p.TgZ(27,"span",21),p._uU(28),p.ALo(29,"currency"),p.ALo(30,"currency"),p.qZA(),p.qZA(),p.qZA(),p._UZ(31,"i",22),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&t){var a=p.oxw();p.xp6(10),p.Oqu(null==a.YTD?p.xi3(11,3,0,"USD"):p.xi3(12,6,a.YTD,"USD")),p.xp6(9),p.Oqu(null==a.quarter?p.xi3(20,9,0,"USD"):p.xi3(21,12,a.quarter,"USD")),p.xp6(9),p.Oqu(null==a.MTD?p.xi3(29,15,0,"USD"):p.xi3(30,18,a.MTD,"USD"))}}function x(t,e){if(1&t&&(p.TgZ(0,"ng-option",33),p._uU(1),p.qZA()),2&t){var a=e.$implicit;p.Q6J("value",a.value),p.xp6(1),p.Oqu(a.value)}}function b(t,e){if(1&t){var a=p.EpF();p.TgZ(0,"div",23),p.TgZ(1,"ng-select",24),p.NdJ("ngModelChange",function(t){return p.CHM(a),p.oxw().timeSelected=t})("change",function(){return p.CHM(a),p.oxw().selectTime()}),p.YNc(2,x,2,2,"ng-option",25),p.qZA(),p.qZA(),p.TgZ(3,"div",26),p.TgZ(4,"div",14),p.TgZ(5,"div",15),p.TgZ(6,"div",27),p.TgZ(7,"div",28),p.TgZ(8,"span",29),p.TgZ(9,"span",21),p._uU(10),p.ALo(11,"currency"),p.qZA(),p.qZA(),p._UZ(12,"i",22),p.TgZ(13,"div",30),p._UZ(14,"apx-chart",31,32),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA()}if(2&t){var i=p.oxw();p.xp6(1),p.Q6J("ngModel",i.timeSelected),p.xp6(1),p.Q6J("ngForOf",i.times),p.xp6(8),p.Oqu(p.xi3(11,9,i.profitAndLoss+i.expensesBar,"USD")),p.xp6(4),p.Q6J("series",i.bar.series)("chart",i.bar.chart)("dataLabels",i.bar.dataLabels)("plotOptions",i.bar.plotOptions)("xaxis",i.bar.xaxis)("colors",i.bar.colors)}}function y(t,e){if(1&t&&(p.TgZ(0,"div",26),p.TgZ(1,"div",14),p.TgZ(2,"div",15),p.TgZ(3,"div",27),p.TgZ(4,"div",28),p.TgZ(5,"span",29),p.TgZ(6,"span",21),p._uU(7),p.ALo(8,"currency"),p.qZA(),p.qZA(),p._UZ(9,"i",22),p.TgZ(10,"div",30),p._UZ(11,"apx-chart",31,34),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&t){var a=p.oxw();p.xp6(7),p.Oqu(p.xi3(8,7,a.profitAndLoss+a.expensesBar,"USD")),p.xp6(4),p.Q6J("series",a.verticalBar.series)("chart",a.verticalBar.chart)("dataLabels",a.verticalBar.dataLabels)("plotOptions",a.verticalBar.plotOptions)("xaxis",a.verticalBar.xaxis)("colors",a.verticalBar.colors)}}function S(t,e){if(1&t&&(p.TgZ(0,"tr"),p.TgZ(1,"th",40),p._uU(2),p.qZA(),p.TgZ(3,"td"),p._uU(4),p.qZA(),p.TgZ(5,"td"),p._uU(6),p.ALo(7,"currency"),p.qZA(),p.TgZ(8,"td"),p._uU(9),p.ALo(10,"currency"),p.qZA(),p.TgZ(11,"td"),p._uU(12),p.qZA(),p.TgZ(13,"td"),p._uU(14),p.qZA(),p.qZA()),2&t){var a=e.$implicit;p.xp6(2),p.Oqu(a.id),p.xp6(2),p.hij(" ",a.Customer?a.Customer:"N/A"," "),p.xp6(2),p.Oqu(a.TotalAmt?p.xi3(7,6,a.TotalAmt,"USD"):"N/A"),p.xp6(3),p.Oqu(a.Amount?p.xi3(10,9,a.Amount,"USD"):"N/A"),p.xp6(3),p.Oqu(a.Date?a.Date:"N/A"),p.xp6(2),p.Oqu(a.pastDue?"Overdue "+a.pastDue+" days":"N/A")}}var O=function(t,e){return{itemsPerPage:5,currentPage:t,totalItems:e}};function U(t,e){if(1&t){var a=p.EpF();p.TgZ(0,"div",26),p.TgZ(1,"div",35),p.TgZ(2,"table",36),p.TgZ(3,"thead"),p.TgZ(4,"tr"),p.TgZ(5,"th",37),p._uU(6,"#"),p.qZA(),p.TgZ(7,"th",37),p._uU(8,"Customer"),p.qZA(),p.TgZ(9,"th",37),p._uU(10,"Bill Total"),p.qZA(),p.TgZ(11,"th",37),p._uU(12,"Balance"),p.qZA(),p.TgZ(13,"th",37),p._uU(14,"Bill Date"),p.qZA(),p.TgZ(15,"th",37),p._uU(16,"Status"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(17,"tbody"),p.YNc(18,S,15,12,"tr",38),p.ALo(19,"paginate"),p.qZA(),p.qZA(),p.TgZ(20,"pagination-controls",39),p.NdJ("pageChange",function(t){return p.CHM(a),p.oxw().duePage=t}),p.qZA(),p.qZA(),p.qZA()}if(2&t){var i=p.oxw();p.xp6(18),p.Q6J("ngForOf",p.xi3(19,1,i.dueData,p.WLB(4,O,i.duePage,i.total)))}}function _(t,e){if(1&t&&(p.TgZ(0,"tr"),p.TgZ(1,"th",40),p._uU(2),p.qZA(),p.TgZ(3,"td"),p._uU(4),p.qZA(),p.TgZ(5,"td"),p._uU(6),p.ALo(7,"currency"),p.qZA(),p.TgZ(8,"td"),p._uU(9),p.qZA(),p.TgZ(10,"td"),p._uU(11,"Paid"),p.qZA(),p.qZA()),2&t){var a=e.$implicit;p.xp6(2),p.Oqu(a.id),p.xp6(2),p.hij(" ",a.Customer?a.Customer:"N/A"," "),p.xp6(2),p.Oqu(a.TotalAmt?p.xi3(7,4,a.TotalAmt,"USD"):"N/A"),p.xp6(3),p.Oqu(a.Date?a.Date:"N/A")}}function w(t,e){if(1&t){var a=p.EpF();p.TgZ(0,"div",26),p.TgZ(1,"div",35),p.TgZ(2,"table",36),p.TgZ(3,"thead"),p.TgZ(4,"tr"),p.TgZ(5,"th",37),p._uU(6,"#"),p.qZA(),p.TgZ(7,"th",37),p._uU(8,"Customer"),p.qZA(),p.TgZ(9,"th",37),p._uU(10,"Bill Total"),p.qZA(),p.TgZ(11,"th",37),p._uU(12,"Bill Date"),p.qZA(),p.TgZ(13,"th",37),p._uU(14,"Status"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(15,"tbody"),p.YNc(16,_,12,7,"tr",38),p.ALo(17,"paginate"),p.qZA(),p.qZA(),p.TgZ(18,"pagination-controls",39),p.NdJ("pageChange",function(t){return p.CHM(a),p.oxw().paidPage=t}),p.qZA(),p.qZA(),p.qZA()}if(2&t){var i=p.oxw();p.xp6(16),p.Q6J("ngForOf",p.xi3(17,1,i.paidData,p.WLB(4,O,i.paidPage,i.total)))}}var B,L,M=[{path:"",children:[{path:"",component:(B=function(){function e(a,i){t(this,e),this.helperService=a,this.localService=i,this.secondary_color=localStorage.getItem("secondary_color")||"#f73164",this.primary_color=localStorage.getItem("primary_color")||"#5330ab",this.times=[{value:"Last 12 months"},{value:"Last 6 months"},{value:"Last 30 days"}],this.bar={series:[{name:"USD",data:[0,0]}],colors:[this.secondary_color],chart:{type:"bar",height:150},plotOptions:{bar:{horizontal:!0}},dataLabels:{enabled:!0},xaxis:{labels:{formatter:function(t){return"$"+t}},categories:["Payments Overdue","Payments not due yet"]}},this.verticalBar={series:[{name:"USD",data:[]}],colors:[this.secondary_color],chart:{type:"bar",height:150},plotOptions:{bar:{vertical:!0}},dataLabels:{enabled:!0},yaxis:{labels:{formatter:function(t){return"$"+t}}},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}}}return a(e,[{key:"ngOnInit",value:function(){this.timeSelected=this.times[0].value,this.companyid=this.localService.getJsonValue("company"),null!=this.companyid&&(this.getpayments(),this.selectTime())}},{key:"selectTime",value:function(){var t;"Last 12 months"==this.timeSelected?(this.currentSum=this.totalSum,this.currentNotDue=this.notDueSum,this.currentOverDue=this.overDueSum):"Last 30 days"==this.timeSelected?(this.currentSum=this.last30DaysSum,this.currentNotDue=this.last30DaysNotDue,this.currentOverDue=this.last30DaysOverDue):"Last 6 months"==this.timeSelected&&(this.currentSum=this.last6MonthsSum,this.currentNotDue=this.last6MonthsNotDue,this.currentOverDue=this.last6MonthsOverDue),this.bar.series[0].data[0]=this.currentOverDue,this.bar.series[0].data[1]=this.currentNotDue,null===(t=this.chart)||void 0===t||t.updateSeries([{name:"USD",data:[this.currentOverDue,this.currentNotDue]}])}},{key:"getpayments",value:function(){var t=this,e=[],a=0,i=0,n=0,r=0,o=0,s=0,c=0,u=0,l=0,g=new Date,Z=new Date;Z.setDate(g.getDate()-30);var p=new Date;p.setMonth(g.getMonth()-6),d.Z.Bill.map(function(d){var h=new Date(d.TxnDate).toLocaleString();h=h.substring(0,h.indexOf(",")),h=t.helperService.formattedDate(d.TxnDate),new Date(h)>=Z&&new Date(h)<=g&&(i+=d.Balance,o+=new Date(d.DueDate)<new Date?d.Balance:0,u+=new Date(d.DueDate)>new Date?d.Balance:0),new Date(h)>=p&&new Date(h)<=g&&(n+=d.Balance,s+=new Date(d.DueDate)<new Date?d.Balance:0,l+=new Date(d.DueDate)>new Date?d.Balance:0);var A=d.VendorRef.name,m=(t.helperService.formattedDate(d.DueDate),t.helperService.calculateDays(d.DueDate));a+=d.Balance,c+=new Date(d.DueDate)>new Date?d.Balance:0,r+=new Date(d.DueDate)<new Date?d.Balance:0,e.push({Date:h,Customer:A,Status:t.helperService.calculateDays(d.DueDate),pastDue:m,Amount:d.Balance,TotalAmt:d.TotalAmt,id:d.Id})}),this.dueData=e.filter(function(t){return 0!=t.Amount}),this.paidData=e.filter(function(t){return 0==t.Amount}),this.barData=this.helperService.getMonthlyExpenses(e),this.MTD=this.helperService.getCurrentMonthExpenses(e),this.YTD=this.helperService.getYearlyExpenses(e);var h=this.helperService.getQuarterlyExpenses(e);this.quarter=parseFloat(h[Object.keys(h).pop()]).toFixed(2),this.totalSum=a,this.last30DaysSum=i,this.last6MonthsSum=n,this.notDueSum=c,this.last30DaysNotDue=u,this.last6MonthsNotDue=l,this.overDueSum=r,this.last30DaysOverDue=o,this.last6MonthsOverDue=s,this.formattedData=e;var A=[];this.barData.map(function(e){e.hasOwnProperty("label")&&t.verticalBar.xaxis.categories.map(function(t){e.label==t&&A.push(e.value)})}),A.map(function(e){t.verticalBar.series[0].data.push(e)}),console.log(this.dueData,this.paidData)}}]),e}(),B.\u0275fac=function(t){return new(t||B)(p.Y36(h.W),p.Y36(A.C))},B.\u0275cmp=p.Xpm({type:B,selectors:[["app-payable"]],viewQuery:function(t,e){var a;1&t&&(p.Gf(T,5),p.Gf(q,5)),2&t&&(p.iGM(a=p.CRH())&&(e.chart=a.first),p.iGM(a=p.CRH())&&(e.Verticalchart=a.first))},decls:18,vars:3,consts:[[3,"title","active_item"],[1,"container"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body","default-accordion"],["activeIds","static-1",3,"closeOthers"],["acc","ngbAccordion"],["title","Revenue","id","static-1"],["ngbPanelContent",""],["title","Dues","id","static-2"],["title","AP Aging","id","static-3"],["title","Bill Due Summary","id","static-4"],["title","Bill paid summary","id","static-5"],[1,"card","o-hidden","cstmCard"],[1,"bg-primary","b-r-4","card-body"],[1,"media","static-top-widget","flex-column"],[1,"media-body","w-100"],[1,"row","mt-3","mb-3"],[1,"col-sm-6"],[1,"m-0"],[1,"mb-0","counter"],["data-feather","dollar-sign",1,"icon-bg"],[1,"col-sm-12","d-flex","justify-content-end"],["placeholder","Select",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-12"],[1,"media","static-top-widget"],[1,"media-body"],[1,"d-flex","align-items-center"],["id","basic-bar",1,"mt-3"],[3,"series","chart","dataLabels","plotOptions","xaxis","colors"],["chart",""],[3,"value"],["Verticalchart",""],[1,"table-responsive"],[1,"table","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],[3,"pageChange"],["scope","row"]],template:function(t,e){1&t&&(p._UZ(0,"app-breadcrumb",0),p.TgZ(1,"div",1),p.TgZ(2,"div",2),p.TgZ(3,"div",3),p.TgZ(4,"div",4),p.TgZ(5,"div",5),p.TgZ(6,"ngb-accordion",6,7),p.TgZ(8,"ngb-panel",8),p.YNc(9,f,32,21,"ng-template",9),p.qZA(),p.TgZ(10,"ngb-panel",10),p.YNc(11,b,16,12,"ng-template",9),p.qZA(),p.TgZ(12,"ngb-panel",11),p.YNc(13,y,13,10,"ng-template",9),p.qZA(),p.TgZ(14,"ngb-panel",12),p.YNc(15,U,21,7,"ng-template",9),p.qZA(),p.TgZ(16,"ngb-panel",13),p.YNc(17,w,19,7,"ng-template",9),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&t&&(p.Q6J("title","Accounts Payable")("active_item","Accounts Payable"),p.xp6(6),p.Q6J("closeOthers",!0))},directives:[m.L,v.gY,v.Gk,v.gW,c.w9,o.JJ,o.On,r.sg,g.x,c.xv,D.LS],pipes:[r.H9,D._s],styles:[".margin1[_ngcontent-%COMP%]{margin-top:1px}#basic-bar[_ngcontent-%COMP%]{background-color:#fef5ed!important}.static-top-widget[_ngcontent-%COMP%]   .media-body[_ngcontent-%COMP%]{padding-left:0}.ng-select[_ngcontent-%COMP%]{margin-bottom:2rem;max-width:250px;width:250px}"]}),B)}]}],C=function(){var e=a(function e(){t(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[Z.Bz.forChild(M)],Z.Bz]}),e}(),N=n(17647),P=((L=a(function e(){t(this,e)})).\u0275fac=function(t){return new(t||L)},L.\u0275mod=p.oAB({type:L}),L.\u0275inj=p.cJS({imports:[[r.ez,C,u.bB,s.d,c.A0,o.u5,o.UX,l.m,g.X,N.xD,D.JX]]}),L)}}])}();
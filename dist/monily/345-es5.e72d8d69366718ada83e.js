!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(self.webpackChunkmonily=self.webpackChunkmonily||[]).push([[345],{61345:function(e,i,n){"use strict";n.r(i),n.d(i,{recievableModule:function(){return J}});var r=n(36280),o=n(17647),s=n(61116),c=n(31041),u=n(90702),l=n(96087),g=n(47323),Z=n(92099),d=n(52080),h=n(40018),p=n(29609),A=n(35366),m=n(83646),v=n(24419),D=n(43675),T=n(39167),q=n(46982),f=["chart"],x=["Verticalchart"];function b(t,e){if(1&t&&(A.TgZ(0,"div",14),A.TgZ(1,"div",15),A.TgZ(2,"div",16),A.TgZ(3,"div",17),A.TgZ(4,"div",18),A.TgZ(5,"div",19),A.TgZ(6,"span",20),A._uU(7,"Yearly"),A.qZA(),A.qZA(),A.TgZ(8,"div",19),A.TgZ(9,"span",21),A._uU(10),A.ALo(11,"currency"),A.ALo(12,"currency"),A.qZA(),A.qZA(),A.qZA(),A.TgZ(13,"div",18),A.TgZ(14,"div",19),A.TgZ(15,"span",20),A._uU(16,"Quaterly"),A.qZA(),A.qZA(),A.TgZ(17,"div",19),A.TgZ(18,"span",21),A._uU(19),A.ALo(20,"currency"),A.ALo(21,"currency"),A.qZA(),A.qZA(),A.qZA(),A.TgZ(22,"div",18),A.TgZ(23,"div",19),A.TgZ(24,"span",20),A._uU(25,"Monthly"),A.qZA(),A.qZA(),A.TgZ(26,"div",19),A.TgZ(27,"span",21),A._uU(28),A.ALo(29,"currency"),A.ALo(30,"currency"),A.qZA(),A.qZA(),A.qZA(),A._UZ(31,"i",22),A.qZA(),A.qZA(),A.qZA(),A.qZA()),2&t){var a=A.oxw();A.xp6(10),A.Oqu(null==a.YTD?A.xi3(11,3,0,"USD"):A.xi3(12,6,a.YTD,"USD")),A.xp6(9),A.Oqu(null==a.quarter?A.xi3(20,9,0,"USD"):A.xi3(21,12,a.quarter,"USD")),A.xp6(9),A.Oqu(null==a.MTD?A.xi3(29,15,0,"USD"):A.xi3(30,18,a.MTD,"USD"))}}function y(t,e){if(1&t&&(A.TgZ(0,"ng-option",33),A._uU(1),A.qZA()),2&t){var a=e.$implicit;A.Q6J("value",a.value),A.xp6(1),A.Oqu(a.value)}}function S(t,e){if(1&t){var a=A.EpF();A.TgZ(0,"div",23),A.TgZ(1,"ng-select",24),A.NdJ("ngModelChange",function(t){return A.CHM(a),A.oxw().timeSelected=t})("change",function(){return A.CHM(a),A.oxw().selectTime()}),A.YNc(2,y,2,2,"ng-option",25),A.qZA(),A.qZA(),A.TgZ(3,"div",26),A.TgZ(4,"div",14),A.TgZ(5,"div",15),A.TgZ(6,"div",27),A.TgZ(7,"div",28),A.TgZ(8,"span",29),A.TgZ(9,"span",21),A._uU(10),A.ALo(11,"currency"),A.qZA(),A.qZA(),A._UZ(12,"i",22),A.TgZ(13,"div",30),A._UZ(14,"apx-chart",31,32),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA()}if(2&t){var i=A.oxw();A.xp6(1),A.Q6J("ngModel",i.timeSelected),A.xp6(1),A.Q6J("ngForOf",i.times),A.xp6(8),A.Oqu(A.xi3(11,9,i.profitAndLoss+i.expensesBar,"USD")),A.xp6(4),A.Q6J("series",i.bar.series)("chart",i.bar.chart)("dataLabels",i.bar.dataLabels)("plotOptions",i.bar.plotOptions)("xaxis",i.bar.xaxis)("colors",i.bar.colors)}}function U(t,e){if(1&t&&(A.TgZ(0,"div",26),A.TgZ(1,"div",14),A.TgZ(2,"div",15),A.TgZ(3,"div",27),A.TgZ(4,"div",28),A.TgZ(5,"span",29),A.TgZ(6,"span",21),A._uU(7),A.ALo(8,"currency"),A.qZA(),A.qZA(),A._UZ(9,"i",22),A.TgZ(10,"div",30),A._UZ(11,"apx-chart",31,34),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA()),2&t){var a=A.oxw();A.xp6(7),A.Oqu(A.xi3(8,7,a.profitAndLoss+a.expensesBar,"USD")),A.xp6(4),A.Q6J("series",a.verticalBar.series)("chart",a.verticalBar.chart)("dataLabels",a.verticalBar.dataLabels)("plotOptions",a.verticalBar.plotOptions)("xaxis",a.verticalBar.xaxis)("colors",a.verticalBar.colors)}}function O(t,e){if(1&t&&(A.TgZ(0,"tr"),A.TgZ(1,"th",40),A._uU(2),A.qZA(),A.TgZ(3,"td"),A._uU(4),A.qZA(),A.TgZ(5,"td"),A._uU(6),A.ALo(7,"currency"),A.qZA(),A.TgZ(8,"td"),A._uU(9),A.ALo(10,"currency"),A.qZA(),A.TgZ(11,"td"),A._uU(12),A.qZA(),A.TgZ(13,"td"),A._uU(14),A.qZA(),A.qZA()),2&t){var a=e.$implicit;A.xp6(2),A.Oqu(a.id),A.xp6(2),A.hij(" ",a.Customer?a.Customer:"N/A"," "),A.xp6(2),A.Oqu(a.TotalAmt?A.xi3(7,6,a.TotalAmt,"USD"):"N/A"),A.xp6(3),A.Oqu(a.Amount?A.xi3(10,9,a.Amount,"USD"):"N/A"),A.xp6(3),A.Oqu(a.Date?a.Date:"N/A"),A.xp6(2),A.Oqu(a.Status?"Overdue "+a.Status+" days":"N/A")}}var _=function(t,e){return{itemsPerPage:5,currentPage:t,totalItems:e}};function w(t,e){if(1&t){var a=A.EpF();A.TgZ(0,"div",26),A.TgZ(1,"div",35),A.TgZ(2,"table",36),A.TgZ(3,"thead"),A.TgZ(4,"tr"),A.TgZ(5,"th",37),A._uU(6,"#"),A.qZA(),A.TgZ(7,"th",37),A._uU(8,"Customer"),A.qZA(),A.TgZ(9,"th",37),A._uU(10,"Bill Total"),A.qZA(),A.TgZ(11,"th",37),A._uU(12,"Balance"),A.qZA(),A.TgZ(13,"th",37),A._uU(14,"Bill Date"),A.qZA(),A.TgZ(15,"th",37),A._uU(16,"Status"),A.qZA(),A.qZA(),A.qZA(),A.TgZ(17,"tbody"),A.YNc(18,O,15,12,"tr",38),A.ALo(19,"paginate"),A.qZA(),A.qZA(),A.TgZ(20,"pagination-controls",39),A.NdJ("pageChange",function(t){return A.CHM(a),A.oxw().duePage=t}),A.qZA(),A.qZA(),A.qZA()}if(2&t){var i=A.oxw();A.xp6(18),A.Q6J("ngForOf",A.xi3(19,1,i.dueData,A.WLB(4,_,i.duePage,i.total)))}}function M(t,e){if(1&t&&(A.TgZ(0,"tr"),A.TgZ(1,"th",40),A._uU(2),A.qZA(),A.TgZ(3,"td"),A._uU(4),A.qZA(),A.TgZ(5,"td"),A._uU(6),A.ALo(7,"currency"),A.qZA(),A.TgZ(8,"td"),A._uU(9),A.qZA(),A.TgZ(10,"td"),A._uU(11,"Paid"),A.qZA(),A.qZA()),2&t){var a=e.$implicit;A.xp6(2),A.Oqu(a.id),A.xp6(2),A.hij(" ",a.Customer?a.Customer:"N/A"," "),A.xp6(2),A.Oqu(a.TotalAmt?A.xi3(7,4,a.TotalAmt,"USD"):"N/A"),A.xp6(3),A.Oqu(a.Date?a.Date:"N/A")}}function B(t,e){if(1&t){var a=A.EpF();A.TgZ(0,"div",26),A.TgZ(1,"div",35),A.TgZ(2,"table",36),A.TgZ(3,"thead"),A.TgZ(4,"tr"),A.TgZ(5,"th",37),A._uU(6,"#"),A.qZA(),A.TgZ(7,"th",37),A._uU(8,"Customer"),A.qZA(),A.TgZ(9,"th",37),A._uU(10,"Bill Total"),A.qZA(),A.TgZ(11,"th",37),A._uU(12,"Bill Date"),A.qZA(),A.TgZ(13,"th",37),A._uU(14,"Status"),A.qZA(),A.qZA(),A.qZA(),A.TgZ(15,"tbody"),A.YNc(16,M,12,7,"tr",38),A.ALo(17,"paginate"),A.qZA(),A.qZA(),A.TgZ(18,"pagination-controls",39),A.NdJ("pageChange",function(t){return A.CHM(a),A.oxw().paidPage=t}),A.qZA(),A.qZA(),A.qZA()}if(2&t){var i=A.oxw();A.xp6(16),A.Q6J("ngForOf",A.xi3(17,1,i.paidData,A.WLB(4,_,i.paidPage,i.total)))}}var C,L,N=[{path:"",children:[{path:"",component:(C=function(){function e(a,i){t(this,e),this.helperService=a,this.localService=i,this.secondary_color=localStorage.getItem("secondary_color")||"#f73164",this.primary_color=localStorage.getItem("primary_color")||"#5330ab",this.times=[{value:"Last 12 months"},{value:"Last 6 months"},{value:"Last 30 days"}],this.bar={series:[{name:"USD",data:[0,0]}],colors:[this.secondary_color],chart:{type:"bar",height:150},plotOptions:{bar:{horizontal:!0}},dataLabels:{enabled:!0},xaxis:{labels:{formatter:function(t){return"$"+t}},categories:["Payments Overdue","Payments not due yet"]}},this.verticalBar={series:[{name:"USD",data:[]}],colors:[this.secondary_color],chart:{type:"bar",height:150},plotOptions:{bar:{vertical:!0}},dataLabels:{enabled:!0},yaxis:{labels:{formatter:function(t){return"$"+t}}},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}}}return a(e,[{key:"ngOnInit",value:function(){this.timeSelected=this.times[0].value,this.companyid=this.localService.getJsonValue("company"),null!=this.companyid&&(this.getpayments(),this.selectTime())}},{key:"selectTime",value:function(){var t;"Last 12 months"==this.timeSelected?(this.currentSum=this.totalSum,this.currentNotDue=this.notDueSum,this.currentOverDue=this.overDueSum):"Last 30 days"==this.timeSelected?(this.currentSum=this.last30DaysSum,this.currentNotDue=this.last30DaysNotDue,this.currentOverDue=this.last30DaysOverDue):"Last 6 months"==this.timeSelected&&(this.currentSum=this.last6MonthsSum,this.currentNotDue=this.last6MonthsNotDue,this.currentOverDue=this.last6MonthsOverDue),this.bar.series[0].data[0]=this.currentOverDue,this.bar.series[0].data[1]=this.currentNotDue,null===(t=this.chart)||void 0===t||t.updateSeries([{name:"USD",data:[this.currentOverDue,this.currentNotDue]}])}},{key:"getpayments",value:function(){var t=this,e=[],a=0,i=0,n=0,r=0,o=0,s=0,c=0,u=0,l=0,g=new Date,Z=new Date;Z.setDate(g.getDate()-30);var d=new Date;d.setMonth(g.getMonth()-6);var A=h.Z.Invoice;console.log(A),A.map(function(h){var A=p(h.TxnDate).format("MM/DD/YYYY"),m=A;new Date(m)>=Z&&new Date(m)<=g&&(i+=h.Balance,o+=new Date(h.DueDate)<new Date?h.Balance:0,u+=new Date(h.DueDate)>new Date?h.Balance:0),new Date(m)>=d&&new Date(m)<=g&&(n+=h.Balance,s+=new Date(h.DueDate)<new Date?h.Balance:0,l+=new Date(h.DueDate)>new Date?h.Balance:0),a+=h.Balance,c+=new Date(h.DueDate)>new Date?h.Balance:0,r+=new Date(h.DueDate)<new Date?h.Balance:0;var v=t.helperService.calculateDays(h.DueDate);e.push({Date:A,num:h.DocNumber,Customer:h.CustomerRef.name,Amount:h.Balance,TotalAmt:h.TotalAmt,Status:v,id:h.Id})}),this.dueData=e.filter(function(t){return 0!=t.Amount}),this.paidData=e.filter(function(t){return 0==t.Amount}),this.barData=this.helperService.getMonthlyExpenses(e),this.MTD=this.helperService.getCurrentMonthExpenses(e),this.YTD=this.helperService.getYearlyExpenses(e);var m=this.helperService.getQuarterlyExpenses(e);this.quarter=parseFloat(m[Object.keys(m).pop()]).toFixed(2),this.totalSum=a,this.last30DaysSum=i,this.last6MonthsSum=n,this.notDueSum=c,this.last30DaysNotDue=u,this.last6MonthsNotDue=l,this.overDueSum=r,this.last30DaysOverDue=o,this.last6MonthsOverDue=s,this.formattedData=e;var v=[];this.barData.map(function(e){e.hasOwnProperty("label")&&t.verticalBar.xaxis.categories.map(function(t){e.label==t&&v.push(e.value)})}),v.map(function(e){t.verticalBar.series[0].data.push(e)}),console.log(this.dueData,this.paidData)}}]),e}(),C.\u0275fac=function(t){return new(t||C)(A.Y36(m.W),A.Y36(v.C))},C.\u0275cmp=A.Xpm({type:C,selectors:[["app-recievable"]],viewQuery:function(t,e){var a;1&t&&(A.Gf(f,5),A.Gf(x,5)),2&t&&(A.iGM(a=A.CRH())&&(e.chart=a.first),A.iGM(a=A.CRH())&&(e.Verticalchart=a.first))},decls:18,vars:3,consts:[[3,"title","active_item"],[1,"container"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body","default-accordion"],["activeIds","static-1",3,"closeOthers"],["acc","ngbAccordion"],["title","Payments","id","static-1"],["ngbPanelContent",""],["title","Dues","id","static-2"],["title","AR Aging","id","static-3"],["title","AR Invoices Due For Payment","id","static-4"],["title","AR Invoices Paid","id","static-5"],[1,"card","o-hidden","cstmCard"],[1,"bg-primary","b-r-4","card-body"],[1,"media","static-top-widget","flex-column"],[1,"media-body","w-100"],[1,"row","mt-3","mb-3"],[1,"col-sm-6"],[1,"m-0"],[1,"mb-0","counter"],["data-feather","dollar-sign",1,"icon-bg"],[1,"col-sm-12","d-flex","justify-content-end"],["placeholder","Select",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-12"],[1,"media","static-top-widget"],[1,"media-body"],[1,"d-flex","align-items-center"],["id","basic-bar",1,"mt-3"],[3,"series","chart","dataLabels","plotOptions","xaxis","colors"],["chart",""],[3,"value"],["Verticalchart",""],[1,"table-responsive"],[1,"table","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],[3,"pageChange"],["scope","row"]],template:function(t,e){1&t&&(A._UZ(0,"app-breadcrumb",0),A.TgZ(1,"div",1),A.TgZ(2,"div",2),A.TgZ(3,"div",3),A.TgZ(4,"div",4),A.TgZ(5,"div",5),A.TgZ(6,"ngb-accordion",6,7),A.TgZ(8,"ngb-panel",8),A.YNc(9,b,32,21,"ng-template",9),A.qZA(),A.TgZ(10,"ngb-panel",10),A.YNc(11,S,16,12,"ng-template",9),A.qZA(),A.TgZ(12,"ngb-panel",11),A.YNc(13,U,13,10,"ng-template",9),A.qZA(),A.TgZ(14,"ngb-panel",12),A.YNc(15,w,21,7,"ng-template",9),A.qZA(),A.TgZ(16,"ngb-panel",13),A.YNc(17,B,19,7,"ng-template",9),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA()),2&t&&(A.Q6J("title","Accounts Recievable")("active_item","Accounts Recievable"),A.xp6(6),A.Q6J("closeOthers",!0))},directives:[D.L,T.gY,T.Gk,T.gW,l.w9,c.JJ,c.On,s.sg,q.x,l.xv,r.LS],pipes:[s.H9,r._s],styles:[".margin1[_ngcontent-%COMP%]{margin-top:1px}#basic-bar[_ngcontent-%COMP%]{background-color:#fef5ed!important}.static-top-widget[_ngcontent-%COMP%]   .media-body[_ngcontent-%COMP%]{padding-left:0}.ng-select[_ngcontent-%COMP%]{margin-bottom:2rem;max-width:250px;width:250px}"]}),C)}]}],P=function(){var e=a(function e(){t(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=A.oAB({type:e}),e.\u0275inj=A.cJS({imports:[[d.Bz.forChild(N)],d.Bz]}),e}(),J=((L=a(function e(){t(this,e)})).\u0275fac=function(t){return new(t||L)},L.\u0275mod=A.oAB({type:L}),L.\u0275inj=A.cJS({imports:[[s.ez,P,g.bB,u.d,l.A0,c.u5,c.UX,Z.m,q.X,o.xD,r.JX]]}),L)}}])}();
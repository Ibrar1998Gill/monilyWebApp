(self.webpackChunkmonily=self.webpackChunkmonily||[]).push([[345],{61345:function(t,e,a){"use strict";a.r(e),a.d(e,{recievableModule:function(){return L}});var i=a(36280),n=a(17647),s=a(61116),r=a(31041),o=a(90702),c=a(96087),l=a(47323),u=a(92099),Z=a(52080),g=a(40018),d=a(29609),h=a(35366),p=a(83646),A=a(24419),m=a(43675),D=a(39167),T=a(46982);const q=["chart"],v=["Verticalchart"];function x(t,e){if(1&t&&(h.TgZ(0,"div",14),h.TgZ(1,"div",15),h.TgZ(2,"div",16),h.TgZ(3,"div",17),h.TgZ(4,"div",18),h.TgZ(5,"div",19),h.TgZ(6,"span",20),h._uU(7,"Yearly"),h.qZA(),h.qZA(),h.TgZ(8,"div",19),h.TgZ(9,"span",21),h._uU(10),h.ALo(11,"currency"),h.ALo(12,"currency"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(13,"div",18),h.TgZ(14,"div",19),h.TgZ(15,"span",20),h._uU(16,"Quaterly"),h.qZA(),h.qZA(),h.TgZ(17,"div",19),h.TgZ(18,"span",21),h._uU(19),h.ALo(20,"currency"),h.ALo(21,"currency"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(22,"div",18),h.TgZ(23,"div",19),h.TgZ(24,"span",20),h._uU(25,"Monthly"),h.qZA(),h.qZA(),h.TgZ(26,"div",19),h.TgZ(27,"span",21),h._uU(28),h.ALo(29,"currency"),h.ALo(30,"currency"),h.qZA(),h.qZA(),h.qZA(),h._UZ(31,"i",22),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&t){const t=h.oxw();h.xp6(10),h.Oqu(null==t.YTD?h.xi3(11,3,0,"USD"):h.xi3(12,6,t.YTD,"USD")),h.xp6(9),h.Oqu(null==t.quarter?h.xi3(20,9,0,"USD"):h.xi3(21,12,t.quarter,"USD")),h.xp6(9),h.Oqu(null==t.MTD?h.xi3(29,15,0,"USD"):h.xi3(30,18,t.MTD,"USD"))}}function b(t,e){if(1&t&&(h.TgZ(0,"ng-option",33),h._uU(1),h.qZA()),2&t){const t=e.$implicit;h.Q6J("value",t.value),h.xp6(1),h.Oqu(t.value)}}function f(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"div",23),h.TgZ(1,"ng-select",24),h.NdJ("ngModelChange",function(e){return h.CHM(t),h.oxw().timeSelected=e})("change",function(){return h.CHM(t),h.oxw().selectTime()}),h.YNc(2,b,2,2,"ng-option",25),h.qZA(),h.qZA(),h.TgZ(3,"div",26),h.TgZ(4,"div",14),h.TgZ(5,"div",15),h.TgZ(6,"div",27),h.TgZ(7,"div",28),h.TgZ(8,"span",29),h.TgZ(9,"span",21),h._uU(10),h.ALo(11,"currency"),h.qZA(),h.qZA(),h._UZ(12,"i",22),h.TgZ(13,"div",30),h._UZ(14,"apx-chart",31,32),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()}if(2&t){const t=h.oxw();h.xp6(1),h.Q6J("ngModel",t.timeSelected),h.xp6(1),h.Q6J("ngForOf",t.times),h.xp6(8),h.Oqu(h.xi3(11,9,t.profitAndLoss+t.expensesBar,"USD")),h.xp6(4),h.Q6J("series",t.bar.series)("chart",t.bar.chart)("dataLabels",t.bar.dataLabels)("plotOptions",t.bar.plotOptions)("xaxis",t.bar.xaxis)("colors",t.bar.colors)}}function y(t,e){if(1&t&&(h.TgZ(0,"div",26),h.TgZ(1,"div",14),h.TgZ(2,"div",15),h.TgZ(3,"div",27),h.TgZ(4,"div",28),h.TgZ(5,"span",29),h.TgZ(6,"span",21),h._uU(7),h.ALo(8,"currency"),h.qZA(),h.qZA(),h._UZ(9,"i",22),h.TgZ(10,"div",30),h._UZ(11,"apx-chart",31,34),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&t){const t=h.oxw();h.xp6(7),h.Oqu(h.xi3(8,7,t.profitAndLoss+t.expensesBar,"USD")),h.xp6(4),h.Q6J("series",t.verticalBar.series)("chart",t.verticalBar.chart)("dataLabels",t.verticalBar.dataLabels)("plotOptions",t.verticalBar.plotOptions)("xaxis",t.verticalBar.xaxis)("colors",t.verticalBar.colors)}}function S(t,e){if(1&t&&(h.TgZ(0,"tr"),h.TgZ(1,"th",40),h._uU(2),h.qZA(),h.TgZ(3,"td"),h._uU(4),h.qZA(),h.TgZ(5,"td"),h._uU(6),h.ALo(7,"currency"),h.qZA(),h.TgZ(8,"td"),h._uU(9),h.ALo(10,"currency"),h.qZA(),h.TgZ(11,"td"),h._uU(12),h.qZA(),h.TgZ(13,"td"),h._uU(14),h.qZA(),h.qZA()),2&t){const t=e.$implicit;h.xp6(2),h.Oqu(t.id),h.xp6(2),h.hij(" ",t.Customer?t.Customer:"N/A"," "),h.xp6(2),h.Oqu(t.TotalAmt?h.xi3(7,6,t.TotalAmt,"USD"):"N/A"),h.xp6(3),h.Oqu(t.Amount?h.xi3(10,9,t.Amount,"USD"):"N/A"),h.xp6(3),h.Oqu(t.Date?t.Date:"N/A"),h.xp6(2),h.Oqu(t.Status?"Overdue "+t.Status+" days":"N/A")}}const U=function(t,e){return{itemsPerPage:5,currentPage:t,totalItems:e}};function _(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"div",26),h.TgZ(1,"div",35),h.TgZ(2,"table",36),h.TgZ(3,"thead"),h.TgZ(4,"tr"),h.TgZ(5,"th",37),h._uU(6,"#"),h.qZA(),h.TgZ(7,"th",37),h._uU(8,"Customer"),h.qZA(),h.TgZ(9,"th",37),h._uU(10,"Bill Total"),h.qZA(),h.TgZ(11,"th",37),h._uU(12,"Balance"),h.qZA(),h.TgZ(13,"th",37),h._uU(14,"Bill Date"),h.qZA(),h.TgZ(15,"th",37),h._uU(16,"Status"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(17,"tbody"),h.YNc(18,S,15,12,"tr",38),h.ALo(19,"paginate"),h.qZA(),h.qZA(),h.TgZ(20,"pagination-controls",39),h.NdJ("pageChange",function(e){return h.CHM(t),h.oxw().duePage=e}),h.qZA(),h.qZA(),h.qZA()}if(2&t){const t=h.oxw();h.xp6(18),h.Q6J("ngForOf",h.xi3(19,1,t.dueData,h.WLB(4,U,t.duePage,t.total)))}}function O(t,e){if(1&t&&(h.TgZ(0,"tr"),h.TgZ(1,"th",40),h._uU(2),h.qZA(),h.TgZ(3,"td"),h._uU(4),h.qZA(),h.TgZ(5,"td"),h._uU(6),h.ALo(7,"currency"),h.qZA(),h.TgZ(8,"td"),h._uU(9),h.qZA(),h.TgZ(10,"td"),h._uU(11,"Paid"),h.qZA(),h.qZA()),2&t){const t=e.$implicit;h.xp6(2),h.Oqu(t.id),h.xp6(2),h.hij(" ",t.Customer?t.Customer:"N/A"," "),h.xp6(2),h.Oqu(t.TotalAmt?h.xi3(7,4,t.TotalAmt,"USD"):"N/A"),h.xp6(3),h.Oqu(t.Date?t.Date:"N/A")}}function w(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"div",26),h.TgZ(1,"div",35),h.TgZ(2,"table",36),h.TgZ(3,"thead"),h.TgZ(4,"tr"),h.TgZ(5,"th",37),h._uU(6,"#"),h.qZA(),h.TgZ(7,"th",37),h._uU(8,"Customer"),h.qZA(),h.TgZ(9,"th",37),h._uU(10,"Bill Total"),h.qZA(),h.TgZ(11,"th",37),h._uU(12,"Bill Date"),h.qZA(),h.TgZ(13,"th",37),h._uU(14,"Status"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(15,"tbody"),h.YNc(16,O,12,7,"tr",38),h.ALo(17,"paginate"),h.qZA(),h.qZA(),h.TgZ(18,"pagination-controls",39),h.NdJ("pageChange",function(e){return h.CHM(t),h.oxw().paidPage=e}),h.qZA(),h.qZA(),h.qZA()}if(2&t){const t=h.oxw();h.xp6(16),h.Q6J("ngForOf",h.xi3(17,1,t.paidData,h.WLB(4,U,t.paidPage,t.total)))}}const M=[{path:"",children:[{path:"",component:(()=>{class t{constructor(t,e){this.helperService=t,this.localService=e,this.secondary_color=localStorage.getItem("secondary_color")||"#f73164",this.primary_color=localStorage.getItem("primary_color")||"#5330ab",this.times=[{value:"Last 12 months"},{value:"Last 6 months"},{value:"Last 30 days"}],this.bar={series:[{name:"USD",data:[0,0]}],colors:[this.secondary_color],chart:{type:"bar",height:150},plotOptions:{bar:{horizontal:!0}},dataLabels:{enabled:!0},xaxis:{labels:{formatter:function(t){return"$"+t}},categories:["Payments Overdue","Payments not due yet"]}},this.verticalBar={series:[{name:"USD",data:[]}],colors:[this.secondary_color],chart:{type:"bar",height:150},plotOptions:{bar:{vertical:!0}},dataLabels:{enabled:!0},yaxis:{labels:{formatter:function(t){return"$"+t}}},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}}}ngOnInit(){this.timeSelected=this.times[0].value,this.companyid=this.localService.getJsonValue("company"),null!=this.companyid&&(this.getpayments(),this.selectTime())}selectTime(){var t;"Last 12 months"==this.timeSelected?(this.currentSum=this.totalSum,this.currentNotDue=this.notDueSum,this.currentOverDue=this.overDueSum):"Last 30 days"==this.timeSelected?(this.currentSum=this.last30DaysSum,this.currentNotDue=this.last30DaysNotDue,this.currentOverDue=this.last30DaysOverDue):"Last 6 months"==this.timeSelected&&(this.currentSum=this.last6MonthsSum,this.currentNotDue=this.last6MonthsNotDue,this.currentOverDue=this.last6MonthsOverDue),this.bar.series[0].data[0]=this.currentOverDue,this.bar.series[0].data[1]=this.currentNotDue,null===(t=this.chart)||void 0===t||t.updateSeries([{name:"USD",data:[this.currentOverDue,this.currentNotDue]}])}getpayments(){let t=[],e=0,a=0,i=0,n=0,s=0,r=0,o=0,c=0,l=0;const u=new Date;let Z=new Date;Z.setDate(u.getDate()-30);let h=new Date;h.setMonth(u.getMonth()-6);let p=g.Z.Invoice;console.log(p),p.map(g=>{let p=d(g.TxnDate).format("MM/DD/YYYY"),A=p;new Date(A)>=Z&&new Date(A)<=u&&(a+=g.Balance,s+=new Date(g.DueDate)<new Date?g.Balance:0,c+=new Date(g.DueDate)>new Date?g.Balance:0),new Date(A)>=h&&new Date(A)<=u&&(i+=g.Balance,r+=new Date(g.DueDate)<new Date?g.Balance:0,l+=new Date(g.DueDate)>new Date?g.Balance:0),e+=g.Balance,o+=new Date(g.DueDate)>new Date?g.Balance:0,n+=new Date(g.DueDate)<new Date?g.Balance:0;let m=this.helperService.calculateDays(g.DueDate);t.push({Date:p,num:g.DocNumber,Customer:g.CustomerRef.name,Amount:g.Balance,TotalAmt:g.TotalAmt,Status:m,id:g.Id})}),this.dueData=t.filter(t=>0!=t.Amount),this.paidData=t.filter(t=>0==t.Amount),this.barData=this.helperService.getMonthlyExpenses(t),this.MTD=this.helperService.getCurrentMonthExpenses(t),this.YTD=this.helperService.getYearlyExpenses(t);const A=this.helperService.getQuarterlyExpenses(t);this.quarter=parseFloat(A[Object.keys(A).pop()]).toFixed(2),this.totalSum=e,this.last30DaysSum=a,this.last6MonthsSum=i,this.notDueSum=o,this.last30DaysNotDue=c,this.last6MonthsNotDue=l,this.overDueSum=n,this.last30DaysOverDue=s,this.last6MonthsOverDue=r,this.formattedData=t;let m=[];this.barData.map(t=>{t.hasOwnProperty("label")&&this.verticalBar.xaxis.categories.map(e=>{t.label==e&&m.push(t.value)})}),m.map(t=>{this.verticalBar.series[0].data.push(t)}),console.log(this.dueData,this.paidData)}}return t.\u0275fac=function(e){return new(e||t)(h.Y36(p.W),h.Y36(A.C))},t.\u0275cmp=h.Xpm({type:t,selectors:[["app-recievable"]],viewQuery:function(t,e){if(1&t&&(h.Gf(q,5),h.Gf(v,5)),2&t){let t;h.iGM(t=h.CRH())&&(e.chart=t.first),h.iGM(t=h.CRH())&&(e.Verticalchart=t.first)}},decls:18,vars:3,consts:[[3,"title","active_item"],[1,"container"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body","default-accordion"],["activeIds","static-1",3,"closeOthers"],["acc","ngbAccordion"],["title","Payments","id","static-1"],["ngbPanelContent",""],["title","Dues","id","static-2"],["title","AR Aging","id","static-3"],["title","AR Invoices Due For Payment","id","static-4"],["title","AR Invoices Paid","id","static-5"],[1,"card","o-hidden","cstmCard"],[1,"bg-primary","b-r-4","card-body"],[1,"media","static-top-widget","flex-column"],[1,"media-body","w-100"],[1,"row","mt-3","mb-3"],[1,"col-sm-6"],[1,"m-0"],[1,"mb-0","counter"],["data-feather","dollar-sign",1,"icon-bg"],[1,"col-sm-12","d-flex","justify-content-end"],["placeholder","Select",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-12"],[1,"media","static-top-widget"],[1,"media-body"],[1,"d-flex","align-items-center"],["id","basic-bar",1,"mt-3"],[3,"series","chart","dataLabels","plotOptions","xaxis","colors"],["chart",""],[3,"value"],["Verticalchart",""],[1,"table-responsive"],[1,"table","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],[3,"pageChange"],["scope","row"]],template:function(t,e){1&t&&(h._UZ(0,"app-breadcrumb",0),h.TgZ(1,"div",1),h.TgZ(2,"div",2),h.TgZ(3,"div",3),h.TgZ(4,"div",4),h.TgZ(5,"div",5),h.TgZ(6,"ngb-accordion",6,7),h.TgZ(8,"ngb-panel",8),h.YNc(9,x,32,21,"ng-template",9),h.qZA(),h.TgZ(10,"ngb-panel",10),h.YNc(11,f,16,12,"ng-template",9),h.qZA(),h.TgZ(12,"ngb-panel",11),h.YNc(13,y,13,10,"ng-template",9),h.qZA(),h.TgZ(14,"ngb-panel",12),h.YNc(15,_,21,7,"ng-template",9),h.qZA(),h.TgZ(16,"ngb-panel",13),h.YNc(17,w,19,7,"ng-template",9),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&t&&(h.Q6J("title","Accounts Recievable")("active_item","Accounts Recievable"),h.xp6(6),h.Q6J("closeOthers",!0))},directives:[m.L,D.gY,D.Gk,D.gW,c.w9,r.JJ,r.On,s.sg,T.x,c.xv,i.LS],pipes:[s.H9,i._s],styles:[".margin1[_ngcontent-%COMP%]{margin-top:1px}#basic-bar[_ngcontent-%COMP%]{background-color:#fef5ed!important}.static-top-widget[_ngcontent-%COMP%]   .media-body[_ngcontent-%COMP%]{padding-left:0}.ng-select[_ngcontent-%COMP%]{margin-bottom:2rem;max-width:250px;width:250px}"]}),t})()}]}];let B=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=h.oAB({type:t}),t.\u0275inj=h.cJS({imports:[[Z.Bz.forChild(M)],Z.Bz]}),t})(),L=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=h.oAB({type:t}),t.\u0275inj=h.cJS({imports:[[s.ez,B,l.bB,o.d,c.A0,r.u5,r.UX,u.m,T.X,n.xD,i.JX]]}),t})()}}]);
!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkmonily=self.webpackChunkmonily||[]).push([[822],{71822:function(t,n,i){"use strict";i.r(n),i.d(n,{expensesModule:function(){return S}});var r=i(61116),o=i(31041),s=i(90702),c=i(96087),u=i(47323),g=i(92099),Z=i(52080),p=i(90894),l=i(35366),d=i(24419),h=i(83646),A=i(43675),T=i(39167),q=i(75800),m=i(36280);function y(e,t){if(1&e&&(l.TgZ(0,"div",13),l.TgZ(1,"div",14),l.TgZ(2,"div",15),l.TgZ(3,"div",16),l.TgZ(4,"div",17),l.TgZ(5,"div",18),l.TgZ(6,"span",19),l._uU(7,"Yearly"),l.qZA(),l.qZA(),l.TgZ(8,"div",18),l.TgZ(9,"span",20),l._uU(10),l.ALo(11,"currency"),l.ALo(12,"currency"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(13,"div",17),l.TgZ(14,"div",18),l.TgZ(15,"span",19),l._uU(16,"Quaterly"),l.qZA(),l.qZA(),l.TgZ(17,"div",18),l.TgZ(18,"span",20),l._uU(19),l.ALo(20,"currency"),l.ALo(21,"currency"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(22,"div",17),l.TgZ(23,"div",18),l.TgZ(24,"span",19),l._uU(25,"Monthly"),l.qZA(),l.qZA(),l.TgZ(26,"div",18),l.TgZ(27,"span",20),l._uU(28),l.ALo(29,"currency"),l.ALo(30,"currency"),l.qZA(),l.qZA(),l.qZA(),l._UZ(31,"i",21),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e){var a=l.oxw();l.xp6(10),l.Oqu(null==a.yearlyExpenses?l.xi3(11,3,0,"USD"):l.xi3(12,6,a.yearlyExpenses,"USD")),l.xp6(9),l.Oqu(null==a.quarterlyExpenses?l.xi3(20,9,0,"USD"):l.xi3(21,12,a.quarterlyExpenses,"USD")),l.xp6(9),l.Oqu(null==a.currentMonthExpenses?l.xi3(29,15,0,"USD"):l.xi3(30,18,a.currentMonthExpenses,"USD"))}}function v(e,t){if(1&e&&(l.TgZ(0,"div",13),l.TgZ(1,"div",22),l.TgZ(2,"div",23),l.TgZ(3,"div",24),l._UZ(4,"i",21),l.TgZ(5,"div",25),l._UZ(6,"google-chart",26),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e){var a=l.oxw();l.xp6(6),l.Q6J("data",a.pieChart3)}}function f(e,t){if(1&e&&(l.TgZ(0,"tr"),l.TgZ(1,"th",33),l._uU(2),l.qZA(),l.TgZ(3,"td"),l._uU(4),l.qZA(),l.TgZ(5,"td"),l._uU(6),l.qZA(),l.TgZ(7,"td"),l._uU(8),l.ALo(9,"currency"),l.qZA(),l.TgZ(10,"td"),l._uU(11),l.qZA(),l.qZA()),2&e){var a=t.$implicit;l.xp6(2),l.Oqu(a.id),l.xp6(2),l.hij(" ",a.Payee?a.Payee:"N/A"," "),l.xp6(2),l.Oqu(a.Category?a.Category:"N/A"),l.xp6(2),l.Oqu(l.xi3(9,5,a.Amount,"USD")),l.xp6(3),l.Oqu(a.Date?a.Date:"N/A")}}var b=function(e,t){return{itemsPerPage:5,currentPage:e,totalItems:t}};function x(e,t){if(1&e){var a=l.EpF();l.TgZ(0,"div",27),l.TgZ(1,"div",28),l.TgZ(2,"table",29),l.TgZ(3,"thead"),l.TgZ(4,"tr"),l.TgZ(5,"th",30),l._uU(6,"#"),l.qZA(),l.TgZ(7,"th",30),l._uU(8,"Payee"),l.qZA(),l.TgZ(9,"th",30),l._uU(10,"Category"),l.qZA(),l.TgZ(11,"th",30),l._uU(12,"Amount"),l.qZA(),l.TgZ(13,"th",30),l._uU(14,"Date"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(15,"tbody"),l.YNc(16,f,12,8,"tr",31),l.ALo(17,"paginate"),l.qZA(),l.qZA(),l.TgZ(18,"pagination-controls",32),l.NdJ("pageChange",function(e){return l.CHM(a),l.oxw().top10Page=e}),l.qZA(),l.qZA(),l.qZA()}if(2&e){var n=l.oxw();l.xp6(16),l.Q6J("ngForOf",l.xi3(17,1,n.top10Expenses,l.WLB(4,b,n.top10Page,n.total)))}}function _(e,t){if(1&e&&(l.TgZ(0,"tr"),l.TgZ(1,"th",33),l._uU(2),l.qZA(),l.TgZ(3,"td"),l._uU(4),l.qZA(),l.TgZ(5,"td"),l._uU(6),l.qZA(),l.TgZ(7,"td"),l._uU(8),l.ALo(9,"currency"),l.qZA(),l.TgZ(10,"td"),l._uU(11),l.qZA(),l.qZA()),2&e){var a=t.$implicit;l.xp6(2),l.Oqu(a.id),l.xp6(2),l.hij(" ",a.Payee?a.Payee:"N/A"," "),l.xp6(2),l.Oqu(a.Category?a.Category:"N/A"),l.xp6(2),l.Oqu(l.xi3(9,5,a.Amount,"USD")),l.xp6(3),l.Oqu(a.Date?a.Date:"N/A")}}function U(e,t){if(1&e){var a=l.EpF();l.TgZ(0,"div",27),l.TgZ(1,"div",28),l.TgZ(2,"table",29),l.TgZ(3,"thead"),l.TgZ(4,"tr"),l.TgZ(5,"th",30),l._uU(6,"#"),l.qZA(),l.TgZ(7,"th",30),l._uU(8,"Payee"),l.qZA(),l.TgZ(9,"th",30),l._uU(10,"Category"),l.qZA(),l.TgZ(11,"th",30),l._uU(12,"Amount"),l.qZA(),l.TgZ(13,"th",30),l._uU(14,"Date"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(15,"tbody"),l.YNc(16,_,12,8,"tr",31),l.ALo(17,"paginate"),l.qZA(),l.qZA(),l.TgZ(18,"pagination-controls",32),l.NdJ("pageChange",function(e){return l.CHM(a),l.oxw().recentPage=e}),l.qZA(),l.qZA(),l.qZA()}if(2&e){var n=l.oxw();l.xp6(16),l.Q6J("ngForOf",l.xi3(17,1,n.RecentTranSort,l.WLB(4,b,n.recentPage,n.total)))}}var D,P,C=[{path:"",children:[{path:"",component:(D=function(){function t(a,n){e(this,t),this.localService=a,this.helperService=n,this.secondary_color=localStorage.getItem("secondary_color")||"#f73164",this.primary_color=localStorage.getItem("primary_color")||"#5330ab",this.page=1,this.totalPage=[],this.mutableData=[],this.mutablePieData={},this.pieArray=[["Task","expenses"]],this.pieChart3={chartType:"PieChart",dataTable:this.pieArray,options:{width:"100%",height:300,colors:["#f8d62b","#51bb25","#a927f9",this.secondary_color,this.primary_color],backgroundColor:"#FEF5ED"}}}return a(t,[{key:"ngOnInit",value:function(){this.companyid=this.localService.getJsonValue("company"),this.mutableData=[],null!=this.companyid&&this.revenueGenerate()}},{key:"revenueGenerate",value:function(){var e=this,t=[];for(var a in p.Z.QueryResponse.Purchase.map(function(t){var a=t.Line[0].AccountBasedExpenseLineDetail.AccountRef.name;e.mutableData.push({Date:t.TxnDate,Payee:t.EntityRef?t.EntityRef.name:"",Category:a,Memo:t.PrivateNote,Amount:t.TotalAmt,id:t.Id}),e.mutablePieData[a]?e.mutablePieData[a]+=parseFloat(t.TotalAmt):e.mutablePieData[a]=parseFloat(t.TotalAmt)}),this.mutablePieData){var n=Math.round(this.mutablePieData[a]);this.pieArray.push([a,n]),t.push(n)}var i=t.reduce(function(e,t){return e+t},0);this.totalExpenses=i;var r=this.mutableData.sort(function(e,t){return new Date(t.Date)-new Date(e.Date)});this.RecentTranSort=r.slice(0,10),this.top10Expenses=this.helperService.top10ExpensesFunc(this.mutableData),this.yearlyExpenses=this.helperService.getYearlyExpenses(this.mutableData);var o=this.helperService.getQuarterlyExpenses(this.mutableData);this.quarterlyExpenses=parseFloat(o[Object.keys(o).pop()]).toFixed(2),this.currentMonthExpenses=this.helperService.getCurrentMonthExpenses(this.mutableData),this.RecentTransaction=this.mutableData.slice(0,10),console.log(this.RecentTranSort,this.top10Expenses)}}]),t}(),D.\u0275fac=function(e){return new(e||D)(l.Y36(d.C),l.Y36(h.W))},D.\u0275cmp=l.Xpm({type:D,selectors:[["app-expenses"]],decls:16,vars:3,consts:[[3,"title","active_item"],[1,"container"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body","default-accordion"],["activeIds","static-1",3,"closeOthers"],["acc","ngbAccordion"],["title","Expenses","id","static-1"],["ngbPanelContent",""],["title","Biggest Expense Heads","id","static-2"],["title","Top 10 Transactions","id","static-3"],["title","Recent Transactions","id","static-4"],[1,"card","o-hidden","cstmCard"],[1,"bg-primary","b-r-4","card-body"],[1,"media","static-top-widget","flex-column"],[1,"media-body","w-100"],[1,"row","mt-3","mb-3"],[1,"col-sm-6"],[1,"m-0"],[1,"mb-0","counter"],["data-feather","dollar-sign",1,"icon-bg"],[1,"bg-primary","b-r-4","card-body","minHeight"],[1,"media","static-top-widget"],[1,"media-body"],[1,"mt-3"],[3,"data"],[1,"col-sm-12"],[1,"table-responsive"],[1,"table","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],[3,"pageChange"],["scope","row"]],template:function(e,t){1&e&&(l._UZ(0,"app-breadcrumb",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"div",4),l.TgZ(5,"div",5),l.TgZ(6,"ngb-accordion",6,7),l.TgZ(8,"ngb-panel",8),l.YNc(9,y,32,21,"ng-template",9),l.qZA(),l.TgZ(10,"ngb-panel",10),l.YNc(11,v,7,1,"ng-template",9),l.qZA(),l.TgZ(12,"ngb-panel",11),l.YNc(13,x,19,7,"ng-template",9),l.qZA(),l.TgZ(14,"ngb-panel",12),l.YNc(15,U,19,7,"ng-template",9),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.Q6J("title","Expenses")("active_item","Expenses"),l.xp6(6),l.Q6J("closeOthers",!0))},directives:[A.L,T.gY,T.Gk,T.gW,q.P4,r.sg,m.LS],pipes:[r.H9,m._s],styles:[".margin1[_ngcontent-%COMP%]{margin-top:1px}#basic-bar[_ngcontent-%COMP%]{background-color:#fef5ed!important}.static-top-widget[_ngcontent-%COMP%]   .media-body[_ngcontent-%COMP%]{padding-left:0}.minHeight[_ngcontent-%COMP%]{min-height:400px}"]}),D)}]}],E=function(){var t=a(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[Z.Bz.forChild(C)],Z.Bz]}),t}(),w=i(17647),O=i(46982),S=((P=a(function t(){e(this,t)})).\u0275fac=function(e){return new(e||P)},P.\u0275mod=l.oAB({type:P}),P.\u0275inj=l.cJS({imports:[[r.ez,E,u.bB,s.d,c.A0,o.u5,o.UX,g.m,q.Ye,w.xD,m.JX,O.X]]}),P)}}])}();
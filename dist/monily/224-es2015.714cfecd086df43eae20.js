(self.webpackChunkmonily=self.webpackChunkmonily||[]).push([[224],{62345:function(t,e,a){"use strict";a.r(e),a.d(e,{payableModule:function(){return L}});var i=a(61116),n=a(31041),s=a(90702),r=a(96087),o=a(47323),c=a(92099),l=a(46982),u=a(52080),g=a(53375),Z=a(35366),d=a(83646),h=a(24419),p=a(43675),A=a(39167),m=a(36280);const D=["chart"],T=["Verticalchart"];function q(t,e){if(1&t&&(Z.TgZ(0,"div",14),Z.TgZ(1,"div",15),Z.TgZ(2,"div",16),Z.TgZ(3,"div",17),Z.TgZ(4,"div",18),Z.TgZ(5,"div",19),Z.TgZ(6,"span",20),Z._uU(7,"Yearly"),Z.qZA(),Z.qZA(),Z.TgZ(8,"div",19),Z.TgZ(9,"span",21),Z._uU(10),Z.ALo(11,"currency"),Z.ALo(12,"currency"),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(13,"div",18),Z.TgZ(14,"div",19),Z.TgZ(15,"span",20),Z._uU(16,"Quaterly"),Z.qZA(),Z.qZA(),Z.TgZ(17,"div",19),Z.TgZ(18,"span",21),Z._uU(19),Z.ALo(20,"currency"),Z.ALo(21,"currency"),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(22,"div",18),Z.TgZ(23,"div",19),Z.TgZ(24,"span",20),Z._uU(25,"Monthly"),Z.qZA(),Z.qZA(),Z.TgZ(26,"div",19),Z.TgZ(27,"span",21),Z._uU(28),Z.ALo(29,"currency"),Z.ALo(30,"currency"),Z.qZA(),Z.qZA(),Z.qZA(),Z._UZ(31,"i",22),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA()),2&t){const t=Z.oxw();Z.xp6(10),Z.Oqu(null==t.YTD?Z.xi3(11,3,0,"USD"):Z.xi3(12,6,t.YTD,"USD")),Z.xp6(9),Z.Oqu(null==t.quarter?Z.xi3(20,9,0,"USD"):Z.xi3(21,12,t.quarter,"USD")),Z.xp6(9),Z.Oqu(null==t.MTD?Z.xi3(29,15,0,"USD"):Z.xi3(30,18,t.MTD,"USD"))}}function v(t,e){if(1&t&&(Z.TgZ(0,"ng-option",33),Z._uU(1),Z.qZA()),2&t){const t=e.$implicit;Z.Q6J("value",t.value),Z.xp6(1),Z.Oqu(t.value)}}function x(t,e){if(1&t){const t=Z.EpF();Z.TgZ(0,"div",23),Z.TgZ(1,"ng-select",24),Z.NdJ("ngModelChange",function(e){return Z.CHM(t),Z.oxw().timeSelected=e})("change",function(){return Z.CHM(t),Z.oxw().selectTime()}),Z.YNc(2,v,2,2,"ng-option",25),Z.qZA(),Z.qZA(),Z.TgZ(3,"div",26),Z.TgZ(4,"div",14),Z.TgZ(5,"div",15),Z.TgZ(6,"div",27),Z.TgZ(7,"div",28),Z.TgZ(8,"span",29),Z.TgZ(9,"span",21),Z._uU(10),Z.ALo(11,"currency"),Z.qZA(),Z.qZA(),Z._UZ(12,"i",22),Z.TgZ(13,"div",30),Z._UZ(14,"apx-chart",31,32),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA()}if(2&t){const t=Z.oxw();Z.xp6(1),Z.Q6J("ngModel",t.timeSelected),Z.xp6(1),Z.Q6J("ngForOf",t.times),Z.xp6(8),Z.Oqu(Z.xi3(11,9,t.profitAndLoss+t.expensesBar,"USD")),Z.xp6(4),Z.Q6J("series",t.bar.series)("chart",t.bar.chart)("dataLabels",t.bar.dataLabels)("plotOptions",t.bar.plotOptions)("xaxis",t.bar.xaxis)("colors",t.bar.colors)}}function b(t,e){if(1&t&&(Z.TgZ(0,"div",26),Z.TgZ(1,"div",14),Z.TgZ(2,"div",15),Z.TgZ(3,"div",27),Z.TgZ(4,"div",28),Z.TgZ(5,"span",29),Z.TgZ(6,"span",21),Z._uU(7),Z.ALo(8,"currency"),Z.qZA(),Z.qZA(),Z._UZ(9,"i",22),Z.TgZ(10,"div",30),Z._UZ(11,"apx-chart",31,34),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA()),2&t){const t=Z.oxw();Z.xp6(7),Z.Oqu(Z.xi3(8,7,t.profitAndLoss+t.expensesBar,"USD")),Z.xp6(4),Z.Q6J("series",t.verticalBar.series)("chart",t.verticalBar.chart)("dataLabels",t.verticalBar.dataLabels)("plotOptions",t.verticalBar.plotOptions)("xaxis",t.verticalBar.xaxis)("colors",t.verticalBar.colors)}}function f(t,e){if(1&t&&(Z.TgZ(0,"tr"),Z.TgZ(1,"th",40),Z._uU(2),Z.qZA(),Z.TgZ(3,"td"),Z._uU(4),Z.qZA(),Z.TgZ(5,"td"),Z._uU(6),Z.ALo(7,"currency"),Z.qZA(),Z.TgZ(8,"td"),Z._uU(9),Z.ALo(10,"currency"),Z.qZA(),Z.TgZ(11,"td"),Z._uU(12),Z.qZA(),Z.TgZ(13,"td"),Z._uU(14),Z.qZA(),Z.qZA()),2&t){const t=e.$implicit;Z.xp6(2),Z.Oqu(t.id),Z.xp6(2),Z.hij(" ",t.Customer?t.Customer:"N/A"," "),Z.xp6(2),Z.Oqu(t.TotalAmt?Z.xi3(7,6,t.TotalAmt,"USD"):"N/A"),Z.xp6(3),Z.Oqu(t.Amount?Z.xi3(10,9,t.Amount,"USD"):"N/A"),Z.xp6(3),Z.Oqu(t.Date?t.Date:"N/A"),Z.xp6(2),Z.Oqu(t.pastDue?"Overdue "+t.pastDue+" days":"N/A")}}const y=function(t,e){return{itemsPerPage:5,currentPage:t,totalItems:e}};function S(t,e){if(1&t){const t=Z.EpF();Z.TgZ(0,"div",26),Z.TgZ(1,"div",35),Z.TgZ(2,"table",36),Z.TgZ(3,"thead"),Z.TgZ(4,"tr"),Z.TgZ(5,"th",37),Z._uU(6,"#"),Z.qZA(),Z.TgZ(7,"th",37),Z._uU(8,"Customer"),Z.qZA(),Z.TgZ(9,"th",37),Z._uU(10,"Bill Total"),Z.qZA(),Z.TgZ(11,"th",37),Z._uU(12,"Balance"),Z.qZA(),Z.TgZ(13,"th",37),Z._uU(14,"Bill Date"),Z.qZA(),Z.TgZ(15,"th",37),Z._uU(16,"Status"),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(17,"tbody"),Z.YNc(18,f,15,12,"tr",38),Z.ALo(19,"paginate"),Z.qZA(),Z.qZA(),Z.TgZ(20,"pagination-controls",39),Z.NdJ("pageChange",function(e){return Z.CHM(t),Z.oxw().duePage=e}),Z.qZA(),Z.qZA(),Z.qZA()}if(2&t){const t=Z.oxw();Z.xp6(18),Z.Q6J("ngForOf",Z.xi3(19,1,t.dueData,Z.WLB(4,y,t.duePage,t.total)))}}function U(t,e){if(1&t&&(Z.TgZ(0,"tr"),Z.TgZ(1,"th",40),Z._uU(2),Z.qZA(),Z.TgZ(3,"td"),Z._uU(4),Z.qZA(),Z.TgZ(5,"td"),Z._uU(6),Z.ALo(7,"currency"),Z.qZA(),Z.TgZ(8,"td"),Z._uU(9),Z.qZA(),Z.TgZ(10,"td"),Z._uU(11,"Paid"),Z.qZA(),Z.qZA()),2&t){const t=e.$implicit;Z.xp6(2),Z.Oqu(t.id),Z.xp6(2),Z.hij(" ",t.Customer?t.Customer:"N/A"," "),Z.xp6(2),Z.Oqu(t.TotalAmt?Z.xi3(7,4,t.TotalAmt,"USD"):"N/A"),Z.xp6(3),Z.Oqu(t.Date?t.Date:"N/A")}}function _(t,e){if(1&t){const t=Z.EpF();Z.TgZ(0,"div",26),Z.TgZ(1,"div",35),Z.TgZ(2,"table",36),Z.TgZ(3,"thead"),Z.TgZ(4,"tr"),Z.TgZ(5,"th",37),Z._uU(6,"#"),Z.qZA(),Z.TgZ(7,"th",37),Z._uU(8,"Customer"),Z.qZA(),Z.TgZ(9,"th",37),Z._uU(10,"Bill Total"),Z.qZA(),Z.TgZ(11,"th",37),Z._uU(12,"Bill Date"),Z.qZA(),Z.TgZ(13,"th",37),Z._uU(14,"Status"),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(15,"tbody"),Z.YNc(16,U,12,7,"tr",38),Z.ALo(17,"paginate"),Z.qZA(),Z.qZA(),Z.TgZ(18,"pagination-controls",39),Z.NdJ("pageChange",function(e){return Z.CHM(t),Z.oxw().paidPage=e}),Z.qZA(),Z.qZA(),Z.qZA()}if(2&t){const t=Z.oxw();Z.xp6(16),Z.Q6J("ngForOf",Z.xi3(17,1,t.paidData,Z.WLB(4,y,t.paidPage,t.total)))}}const O=[{path:"",children:[{path:"",component:(()=>{class t{constructor(t,e){this.helperService=t,this.localService=e,this.secondary_color=localStorage.getItem("secondary_color")||"#f73164",this.primary_color=localStorage.getItem("primary_color")||"#5330ab",this.times=[{value:"Last 12 months"},{value:"Last 6 months"},{value:"Last 30 days"}],this.bar={series:[{name:"USD",data:[0,0]}],colors:[this.secondary_color],chart:{type:"bar",height:150},plotOptions:{bar:{horizontal:!0}},dataLabels:{enabled:!0},xaxis:{labels:{formatter:function(t){return"$"+t}},categories:["Payments Overdue","Payments not due yet"]}},this.verticalBar={series:[{name:"USD",data:[]}],colors:[this.secondary_color],chart:{type:"bar",height:150},plotOptions:{bar:{vertical:!0}},dataLabels:{enabled:!0},yaxis:{labels:{formatter:function(t){return"$"+t}}},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}}}ngOnInit(){this.timeSelected=this.times[0].value,this.companyid=this.localService.getJsonValue("company"),null!=this.companyid&&(this.getpayments(),this.selectTime())}selectTime(){var t;"Last 12 months"==this.timeSelected?(this.currentSum=this.totalSum,this.currentNotDue=this.notDueSum,this.currentOverDue=this.overDueSum):"Last 30 days"==this.timeSelected?(this.currentSum=this.last30DaysSum,this.currentNotDue=this.last30DaysNotDue,this.currentOverDue=this.last30DaysOverDue):"Last 6 months"==this.timeSelected&&(this.currentSum=this.last6MonthsSum,this.currentNotDue=this.last6MonthsNotDue,this.currentOverDue=this.last6MonthsOverDue),this.bar.series[0].data[0]=this.currentOverDue,this.bar.series[0].data[1]=this.currentNotDue,null===(t=this.chart)||void 0===t||t.updateSeries([{name:"USD",data:[this.currentOverDue,this.currentNotDue]}])}getpayments(){let t=[],e=0,a=0,i=0,n=0,s=0,r=0,o=0,c=0,l=0;const u=new Date;let Z=new Date;Z.setDate(u.getDate()-30);let d=new Date;d.setMonth(u.getMonth()-6),g.Z.Bill.map(g=>{let h=new Date(g.TxnDate).toLocaleString();h=h.substring(0,h.indexOf(",")),h=this.helperService.formattedDate(g.TxnDate),new Date(h)>=Z&&new Date(h)<=u&&(a+=g.Balance,s+=new Date(g.DueDate)<new Date?g.Balance:0,c+=new Date(g.DueDate)>new Date?g.Balance:0),new Date(h)>=d&&new Date(h)<=u&&(i+=g.Balance,r+=new Date(g.DueDate)<new Date?g.Balance:0,l+=new Date(g.DueDate)>new Date?g.Balance:0);const p=g.VendorRef.name,A=(this.helperService.formattedDate(g.DueDate),this.helperService.calculateDays(g.DueDate));e+=g.Balance,o+=new Date(g.DueDate)>new Date?g.Balance:0,n+=new Date(g.DueDate)<new Date?g.Balance:0,t.push({Date:h,Customer:p,Status:this.helperService.calculateDays(g.DueDate),pastDue:A,Amount:g.Balance,TotalAmt:g.TotalAmt,id:g.Id})}),this.dueData=t.filter(t=>0!=t.Amount),this.paidData=t.filter(t=>0==t.Amount),this.barData=this.helperService.getMonthlyExpenses(t),this.MTD=this.helperService.getCurrentMonthExpenses(t),this.YTD=this.helperService.getYearlyExpenses(t);const h=this.helperService.getQuarterlyExpenses(t);this.quarter=parseFloat(h[Object.keys(h).pop()]).toFixed(2),this.totalSum=e,this.last30DaysSum=a,this.last6MonthsSum=i,this.notDueSum=o,this.last30DaysNotDue=c,this.last6MonthsNotDue=l,this.overDueSum=n,this.last30DaysOverDue=s,this.last6MonthsOverDue=r,this.formattedData=t;let p=[];this.barData.map(t=>{t.hasOwnProperty("label")&&this.verticalBar.xaxis.categories.map(e=>{t.label==e&&p.push(t.value)})}),p.map(t=>{this.verticalBar.series[0].data.push(t)}),console.log(this.dueData,this.paidData)}}return t.\u0275fac=function(e){return new(e||t)(Z.Y36(d.W),Z.Y36(h.C))},t.\u0275cmp=Z.Xpm({type:t,selectors:[["app-payable"]],viewQuery:function(t,e){if(1&t&&(Z.Gf(D,5),Z.Gf(T,5)),2&t){let t;Z.iGM(t=Z.CRH())&&(e.chart=t.first),Z.iGM(t=Z.CRH())&&(e.Verticalchart=t.first)}},decls:18,vars:3,consts:[[3,"title","active_item"],[1,"container"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body","default-accordion"],["activeIds","static-1",3,"closeOthers"],["acc","ngbAccordion"],["title","Revenue","id","static-1"],["ngbPanelContent",""],["title","Dues","id","static-2"],["title","AP Aging","id","static-3"],["title","Bill Due Summary","id","static-4"],["title","Bill paid summary","id","static-5"],[1,"card","o-hidden","cstmCard"],[1,"bg-primary","b-r-4","card-body"],[1,"media","static-top-widget","flex-column"],[1,"media-body","w-100"],[1,"row","mt-3","mb-3"],[1,"col-sm-6"],[1,"m-0"],[1,"mb-0","counter"],["data-feather","dollar-sign",1,"icon-bg"],[1,"col-sm-12","d-flex","justify-content-end"],["placeholder","Select",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-12"],[1,"media","static-top-widget"],[1,"media-body"],[1,"d-flex","align-items-center"],["id","basic-bar",1,"mt-3"],[3,"series","chart","dataLabels","plotOptions","xaxis","colors"],["chart",""],[3,"value"],["Verticalchart",""],[1,"table-responsive"],[1,"table","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],[3,"pageChange"],["scope","row"]],template:function(t,e){1&t&&(Z._UZ(0,"app-breadcrumb",0),Z.TgZ(1,"div",1),Z.TgZ(2,"div",2),Z.TgZ(3,"div",3),Z.TgZ(4,"div",4),Z.TgZ(5,"div",5),Z.TgZ(6,"ngb-accordion",6,7),Z.TgZ(8,"ngb-panel",8),Z.YNc(9,q,32,21,"ng-template",9),Z.qZA(),Z.TgZ(10,"ngb-panel",10),Z.YNc(11,x,16,12,"ng-template",9),Z.qZA(),Z.TgZ(12,"ngb-panel",11),Z.YNc(13,b,13,10,"ng-template",9),Z.qZA(),Z.TgZ(14,"ngb-panel",12),Z.YNc(15,S,21,7,"ng-template",9),Z.qZA(),Z.TgZ(16,"ngb-panel",13),Z.YNc(17,_,19,7,"ng-template",9),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA()),2&t&&(Z.Q6J("title","Accounts Payable")("active_item","Accounts Payable"),Z.xp6(6),Z.Q6J("closeOthers",!0))},directives:[p.L,A.gY,A.Gk,A.gW,r.w9,n.JJ,n.On,i.sg,l.x,r.xv,m.LS],pipes:[i.H9,m._s],styles:[".margin1[_ngcontent-%COMP%]{margin-top:1px}#basic-bar[_ngcontent-%COMP%]{background-color:#fef5ed!important}.static-top-widget[_ngcontent-%COMP%]   .media-body[_ngcontent-%COMP%]{padding-left:0}.ng-select[_ngcontent-%COMP%]{margin-bottom:2rem;max-width:250px;width:250px}"]}),t})()}]}];let w=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Z.oAB({type:t}),t.\u0275inj=Z.cJS({imports:[[u.Bz.forChild(O)],u.Bz]}),t})();var B=a(17647);let L=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Z.oAB({type:t}),t.\u0275inj=Z.cJS({imports:[[i.ez,w,o.bB,s.d,r.A0,n.u5,n.UX,c.m,l.X,B.xD,m.JX]]}),t})()}}]);
(self.webpackChunkmonily=self.webpackChunkmonily||[]).push([[822],{71822:function(t,e,a){"use strict";a.r(e),a.d(e,{expensesModule:function(){return C}});var n=a(61116),i=a(31041),o=a(90702),r=a(96087),s=a(47323),c=a(92099),g=a(52080),Z=a(90894),p=a(35366),u=a(24419),l=a(83646),d=a(43675),A=a(39167),h=a(75800),q=a(36280);function T(t,e){if(1&t&&(p.TgZ(0,"div",13),p.TgZ(1,"div",14),p.TgZ(2,"div",15),p.TgZ(3,"div",16),p.TgZ(4,"div",17),p.TgZ(5,"div",18),p.TgZ(6,"span",19),p._uU(7,"Yearly"),p.qZA(),p.qZA(),p.TgZ(8,"div",18),p.TgZ(9,"span",20),p._uU(10),p.ALo(11,"currency"),p.ALo(12,"currency"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(13,"div",17),p.TgZ(14,"div",18),p.TgZ(15,"span",19),p._uU(16,"Quaterly"),p.qZA(),p.qZA(),p.TgZ(17,"div",18),p.TgZ(18,"span",20),p._uU(19),p.ALo(20,"currency"),p.ALo(21,"currency"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(22,"div",17),p.TgZ(23,"div",18),p.TgZ(24,"span",19),p._uU(25,"Monthly"),p.qZA(),p.qZA(),p.TgZ(26,"div",18),p.TgZ(27,"span",20),p._uU(28),p.ALo(29,"currency"),p.ALo(30,"currency"),p.qZA(),p.qZA(),p.qZA(),p._UZ(31,"i",21),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&t){const t=p.oxw();p.xp6(10),p.Oqu(null==t.yearlyExpenses?p.xi3(11,3,0,"USD"):p.xi3(12,6,t.yearlyExpenses,"USD")),p.xp6(9),p.Oqu(null==t.quarterlyExpenses?p.xi3(20,9,0,"USD"):p.xi3(21,12,t.quarterlyExpenses,"USD")),p.xp6(9),p.Oqu(null==t.currentMonthExpenses?p.xi3(29,15,0,"USD"):p.xi3(30,18,t.currentMonthExpenses,"USD"))}}function m(t,e){if(1&t&&(p.TgZ(0,"div",13),p.TgZ(1,"div",22),p.TgZ(2,"div",23),p.TgZ(3,"div",24),p._UZ(4,"i",21),p.TgZ(5,"div",25),p._UZ(6,"google-chart",26),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&t){const t=p.oxw();p.xp6(6),p.Q6J("data",t.pieChart3)}}function y(t,e){if(1&t&&(p.TgZ(0,"tr"),p.TgZ(1,"th",33),p._uU(2),p.qZA(),p.TgZ(3,"td"),p._uU(4),p.qZA(),p.TgZ(5,"td"),p._uU(6),p.qZA(),p.TgZ(7,"td"),p._uU(8),p.ALo(9,"currency"),p.qZA(),p.TgZ(10,"td"),p._uU(11),p.qZA(),p.qZA()),2&t){const t=e.$implicit;p.xp6(2),p.Oqu(t.id),p.xp6(2),p.hij(" ",t.Payee?t.Payee:"N/A"," "),p.xp6(2),p.Oqu(t.Category?t.Category:"N/A"),p.xp6(2),p.Oqu(p.xi3(9,5,t.Amount,"USD")),p.xp6(3),p.Oqu(t.Date?t.Date:"N/A")}}const x=function(t,e){return{itemsPerPage:5,currentPage:t,totalItems:e}};function b(t,e){if(1&t){const t=p.EpF();p.TgZ(0,"div",27),p.TgZ(1,"div",28),p.TgZ(2,"table",29),p.TgZ(3,"thead"),p.TgZ(4,"tr"),p.TgZ(5,"th",30),p._uU(6,"#"),p.qZA(),p.TgZ(7,"th",30),p._uU(8,"Payee"),p.qZA(),p.TgZ(9,"th",30),p._uU(10,"Category"),p.qZA(),p.TgZ(11,"th",30),p._uU(12,"Amount"),p.qZA(),p.TgZ(13,"th",30),p._uU(14,"Date"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(15,"tbody"),p.YNc(16,y,12,8,"tr",31),p.ALo(17,"paginate"),p.qZA(),p.qZA(),p.TgZ(18,"pagination-controls",32),p.NdJ("pageChange",function(e){return p.CHM(t),p.oxw().top10Page=e}),p.qZA(),p.qZA(),p.qZA()}if(2&t){const t=p.oxw();p.xp6(16),p.Q6J("ngForOf",p.xi3(17,1,t.top10Expenses,p.WLB(4,x,t.top10Page,t.total)))}}function f(t,e){if(1&t&&(p.TgZ(0,"tr"),p.TgZ(1,"th",33),p._uU(2),p.qZA(),p.TgZ(3,"td"),p._uU(4),p.qZA(),p.TgZ(5,"td"),p._uU(6),p.qZA(),p.TgZ(7,"td"),p._uU(8),p.ALo(9,"currency"),p.qZA(),p.TgZ(10,"td"),p._uU(11),p.qZA(),p.qZA()),2&t){const t=e.$implicit;p.xp6(2),p.Oqu(t.id),p.xp6(2),p.hij(" ",t.Payee?t.Payee:"N/A"," "),p.xp6(2),p.Oqu(t.Category?t.Category:"N/A"),p.xp6(2),p.Oqu(p.xi3(9,5,t.Amount,"USD")),p.xp6(3),p.Oqu(t.Date?t.Date:"N/A")}}function v(t,e){if(1&t){const t=p.EpF();p.TgZ(0,"div",27),p.TgZ(1,"div",28),p.TgZ(2,"table",29),p.TgZ(3,"thead"),p.TgZ(4,"tr"),p.TgZ(5,"th",30),p._uU(6,"#"),p.qZA(),p.TgZ(7,"th",30),p._uU(8,"Payee"),p.qZA(),p.TgZ(9,"th",30),p._uU(10,"Category"),p.qZA(),p.TgZ(11,"th",30),p._uU(12,"Amount"),p.qZA(),p.TgZ(13,"th",30),p._uU(14,"Date"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(15,"tbody"),p.YNc(16,f,12,8,"tr",31),p.ALo(17,"paginate"),p.qZA(),p.qZA(),p.TgZ(18,"pagination-controls",32),p.NdJ("pageChange",function(e){return p.CHM(t),p.oxw().recentPage=e}),p.qZA(),p.qZA(),p.qZA()}if(2&t){const t=p.oxw();p.xp6(16),p.Q6J("ngForOf",p.xi3(17,1,t.RecentTranSort,p.WLB(4,x,t.recentPage,t.total)))}}const _=[{path:"",children:[{path:"",component:(()=>{class t{constructor(t,e){this.localService=t,this.helperService=e,this.secondary_color=localStorage.getItem("secondary_color")||"#f73164",this.primary_color=localStorage.getItem("primary_color")||"#5330ab",this.page=1,this.totalPage=[],this.mutableData=[],this.mutablePieData={},this.pieArray=[["Task","expenses"]],this.pieChart3={chartType:"PieChart",dataTable:this.pieArray,options:{width:"100%",height:300,colors:["#f8d62b","#51bb25","#a927f9",this.secondary_color,this.primary_color],backgroundColor:"#FEF5ED"}}}ngOnInit(){this.companyid=this.localService.getJsonValue("company"),this.mutableData=[],null!=this.companyid&&this.revenueGenerate()}revenueGenerate(){let t=[];Z.Z.QueryResponse.Purchase.map(t=>{let e=t.Line[0].AccountBasedExpenseLineDetail.AccountRef.name;this.mutableData.push({Date:t.TxnDate,Payee:t.EntityRef?t.EntityRef.name:"",Category:e,Memo:t.PrivateNote,Amount:t.TotalAmt,id:t.Id}),this.mutablePieData[e]?this.mutablePieData[e]+=parseFloat(t.TotalAmt):this.mutablePieData[e]=parseFloat(t.TotalAmt)});for(const i in this.mutablePieData){let e=Math.round(this.mutablePieData[i]);this.pieArray.push([i,e]),t.push(e)}var e=t.reduce(function(t,e){return t+e},0);this.totalExpenses=e;let a=this.mutableData.sort(function(t,e){return new Date(e.Date)-new Date(t.Date)});this.RecentTranSort=a.slice(0,10),this.top10Expenses=this.helperService.top10ExpensesFunc(this.mutableData),this.yearlyExpenses=this.helperService.getYearlyExpenses(this.mutableData);const n=this.helperService.getQuarterlyExpenses(this.mutableData);this.quarterlyExpenses=parseFloat(n[Object.keys(n).pop()]).toFixed(2),this.currentMonthExpenses=this.helperService.getCurrentMonthExpenses(this.mutableData),this.RecentTransaction=this.mutableData.slice(0,10),console.log(this.RecentTranSort,this.top10Expenses)}}return t.\u0275fac=function(e){return new(e||t)(p.Y36(u.C),p.Y36(l.W))},t.\u0275cmp=p.Xpm({type:t,selectors:[["app-expenses"]],decls:16,vars:3,consts:[[3,"title","active_item"],[1,"container"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body","default-accordion"],["activeIds","static-1",3,"closeOthers"],["acc","ngbAccordion"],["title","Expenses","id","static-1"],["ngbPanelContent",""],["title","Biggest Expense Heads","id","static-2"],["title","Top 10 Transactions","id","static-3"],["title","Recent Transactions","id","static-4"],[1,"card","o-hidden","cstmCard"],[1,"bg-primary","b-r-4","card-body"],[1,"media","static-top-widget","flex-column"],[1,"media-body","w-100"],[1,"row","mt-3","mb-3"],[1,"col-sm-6"],[1,"m-0"],[1,"mb-0","counter"],["data-feather","dollar-sign",1,"icon-bg"],[1,"bg-primary","b-r-4","card-body","minHeight"],[1,"media","static-top-widget"],[1,"media-body"],[1,"mt-3"],[3,"data"],[1,"col-sm-12"],[1,"table-responsive"],[1,"table","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],[3,"pageChange"],["scope","row"]],template:function(t,e){1&t&&(p._UZ(0,"app-breadcrumb",0),p.TgZ(1,"div",1),p.TgZ(2,"div",2),p.TgZ(3,"div",3),p.TgZ(4,"div",4),p.TgZ(5,"div",5),p.TgZ(6,"ngb-accordion",6,7),p.TgZ(8,"ngb-panel",8),p.YNc(9,T,32,21,"ng-template",9),p.qZA(),p.TgZ(10,"ngb-panel",10),p.YNc(11,m,7,1,"ng-template",9),p.qZA(),p.TgZ(12,"ngb-panel",11),p.YNc(13,b,19,7,"ng-template",9),p.qZA(),p.TgZ(14,"ngb-panel",12),p.YNc(15,v,19,7,"ng-template",9),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&t&&(p.Q6J("title","Expenses")("active_item","Expenses"),p.xp6(6),p.Q6J("closeOthers",!0))},directives:[d.L,A.gY,A.Gk,A.gW,h.P4,n.sg,q.LS],pipes:[n.H9,q._s],styles:[".margin1[_ngcontent-%COMP%]{margin-top:1px}#basic-bar[_ngcontent-%COMP%]{background-color:#fef5ed!important}.static-top-widget[_ngcontent-%COMP%]   .media-body[_ngcontent-%COMP%]{padding-left:0}.minHeight[_ngcontent-%COMP%]{min-height:400px}"]}),t})()}]}];let U=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[[g.Bz.forChild(_)],g.Bz]}),t})();var D=a(17647),P=a(46982);let C=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[[n.ez,U,s.bB,o.d,r.A0,i.u5,i.UX,c.m,h.Ye,D.xD,q.JX,P.X]]}),t})()}}]);